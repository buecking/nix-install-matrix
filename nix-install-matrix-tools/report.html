<style>

body {
  font-family: sans-serif;
}

td, th {
  padding: 10px;
  vertical-align: top;
}

table {
   border-collapse: collapse;
   width: 100%;
}

tr.environment-row > td, tr.environment-row > th {
    border-bottom: 5px double black;
}

.environment-row {
    border-top: 2px solid black;
}

.testcase-name {
    font-style: italic;
}

.scenario-name {
    font-style: italic;
    text-align: right;
    vertical-align: top;
}

.environment-name {
    text-align: left;
}

.test-result {
    border: 1px solid;
}

.environment-details-row > td {
  background-color: #ffffff;
}

tbody > tr.result-status-row:nth-child(even) {
    background-color: #f2f2f2
}

.test-result-summary > a {
  font-style: italic;
}

.environment-details-row > td {
  padding: 0px 0px 0px 0px;
  line-height: 0px;
}

td.environment-details-cell {
  line-height: 16px;
  vertical-align: top;
  width: 10%;
  padding: 10px; 10px 10px 10px;
}


tr.result-status-row > td {
  border-top: none;
}

.test-result.test-result-fail {
    background-color: #ffe4e4;
}

.test-result.test-result-pass {
    background-color: #eaffea;
}

.test-result-log-sample {
  font-size: 0.8em;
}

.test-result-summary > a {
  font-size: 0.8em;
}

.environment-row > td, .environment-row > th {
  vertical-align: bottom;
  text-align: center;
}

</style>
<table borders=1>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<th colspan=5>testcases</th>
</tr>

  <tr class="environment-row">
    <th colspan=2 class="environment-name">install-default-macos-highsierra</th>
    <td class=testcase-name>testexitfail</td>
<td class=testcase-name>testshell</td>
<td class=testcase-name>testexitok</td>
<td class=testcase-name>testnixchannel</td>
<td class=testcase-name>testnixenv</td>
  </tr>
  <tr class="environment-details-row">
    <td rowspan=5 class="environment-details-cell">
<p><strong>run-log:</strong><br /><a href="#detail-install-default-macos-highsierra-run-log">(see full dataset)</a></p>
<p><strong>install-method:</strong> <tt>install-default
</tt></p>
<p><strong>Vagrantfile:</strong><br /><a href="#detail-install-default-macos-highsierra-Vagrantfile">(see full dataset)</a></p>
<p><strong>image-name:</strong> <tt>macos-highsierra
</tt></p>
    </td>
    <td colspan=4>&nbsp</td>
  </tr>

<tr class="result-status-row"><td class="scenario-name">login-interactive</td>

<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 1</span> in 0s <a href="#install-default-macos-highsierra-login-interactive-testexitfail">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitfail<br>

 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 3s <a href="#install-default-macos-highsierra-login-interactive-testshell">(full log)</a></div/>
<tt class="test-result-log-sample">(truncated)<br>

  /nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10<br>

copying path '/nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10' from 'https://cache.nixos.org'...<br>

Hello, world!<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 0s <a href="#install-default-macos-highsierra-login-interactive-testexitok">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitok<br>

 ./testscript::testexitok::8 /bin/bash -c 'exit 0'<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 33s <a href="#install-default-macos-highsierra-login-interactive-testnixchannel">(full log)</a></div/>
<tt class="test-result-log-sample">(truncated)<br>

Hello, world!<br>

 ./testscript::testnixchannel::30 nix-env --uninstall 'hello.*'<br>

uninstalling 'hello-2.10'<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 1s <a href="#install-default-macos-highsierra-login-interactive-testnixenv">(full log)</a></div/>
<tt class="test-result-log-sample">(truncated)<br>

uninstalling 'hello-2.10'<br>

building '/nix/store/xsk9wjy0dpp7w7d3r3bkzxzaklqdzq6q-user-environment.drv'...<br>

created 0 symlinks in user environment<br>
<tt>
</td>


</tr>


<tr class="result-status-row"><td class="scenario-name">ssh</td>

<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 1</span> in 0s <a href="#install-default-macos-highsierra-ssh-testexitfail">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitfail<br>

 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-ssh-testshell">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testshell<br>

 ./testscript::testshell::16 nix-shell -p hello --run hello<br>

./testscript: line 16: nix-shell: command not found<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 0s <a href="#install-default-macos-highsierra-ssh-testexitok">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitok<br>

 ./testscript::testexitok::8 /bin/bash -c 'exit 0'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-ssh-testnixchannel">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixchannel<br>

 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03<br>

./testscript: line 26: nix-channel: command not found<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-ssh-testnixenv">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixenv<br>

 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello<br>

./testscript: line 20: nix-env: command not found<br>
<tt>
</td>


</tr>


<tr class="result-status-row"><td class="scenario-name">interactive</td>

<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 1</span> in 0s <a href="#install-default-macos-highsierra-interactive-testexitfail">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitfail<br>

 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-interactive-testshell">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testshell<br>

 ./testscript::testshell::16 nix-shell -p hello --run hello<br>

./testscript: line 16: nix-shell: command not found<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 0s <a href="#install-default-macos-highsierra-interactive-testexitok">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitok<br>

 ./testscript::testexitok::8 /bin/bash -c 'exit 0'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-interactive-testnixchannel">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixchannel<br>

 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03<br>

./testscript: line 26: nix-channel: command not found<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-interactive-testnixenv">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixenv<br>

 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello<br>

./testscript: line 20: nix-env: command not found<br>
<tt>
</td>


</tr>


<tr class="result-status-row"><td class="scenario-name">login</td>

<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 1</span> in 0s <a href="#install-default-macos-highsierra-login-testexitfail">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitfail<br>

 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-login-testshell">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testshell<br>

 ./testscript::testshell::16 nix-shell -p hello --run hello<br>

./testscript: line 16: nix-shell: command not found<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 0s <a href="#install-default-macos-highsierra-login-testexitok">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitok<br>

 ./testscript::testexitok::8 /bin/bash -c 'exit 0'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-login-testnixchannel">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixchannel<br>

 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03<br>

./testscript: line 26: nix-channel: command not found<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-login-testnixenv">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixenv<br>

 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello<br>

./testscript: line 20: nix-env: command not found<br>
<tt>
</td>


</tr>




  <tr class="environment-row">
    <th colspan=2 class="environment-name">install-default-macos-sierra</th>
    <td class=testcase-name>testexitfail</td>
<td class=testcase-name>testshell</td>
<td class=testcase-name>testexitok</td>
<td class=testcase-name>testnixchannel</td>
<td class=testcase-name>testnixenv</td>
  </tr>
  <tr class="environment-details-row">
    <td rowspan=5 class="environment-details-cell">
<p><strong>image-name:</strong> <tt>macos-sierra
</tt></p>
<p><strong>install-method:</strong> <tt>install-default
</tt></p>
<p><strong>run-log:</strong><br /><a href="#detail-install-default-macos-sierra-run-log">(see full dataset)</a></p>
<p><strong>Vagrantfile:</strong><br /><a href="#detail-install-default-macos-sierra-Vagrantfile">(see full dataset)</a></p>
    </td>
    <td colspan=4>&nbsp</td>
  </tr>

<tr class="result-status-row"><td class="scenario-name">login-interactive</td>

<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 1</span> in 0s <a href="#install-default-macos-sierra-login-interactive-testexitfail">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitfail<br>

 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 4s <a href="#install-default-macos-sierra-login-interactive-testshell">(full log)</a></div/>
<tt class="test-result-log-sample">(truncated)<br>

  /nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10<br>

copying path '/nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10' from 'https://cache.nixos.org'...<br>

Hello, world!<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 0s <a href="#install-default-macos-sierra-login-interactive-testexitok">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitok<br>

 ./testscript::testexitok::8 /bin/bash -c 'exit 0'<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 27s <a href="#install-default-macos-sierra-login-interactive-testnixchannel">(full log)</a></div/>
<tt class="test-result-log-sample">(truncated)<br>

Hello, world!<br>

 ./testscript::testnixchannel::30 nix-env --uninstall 'hello.*'<br>

uninstalling 'hello-2.10'<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 1s <a href="#install-default-macos-sierra-login-interactive-testnixenv">(full log)</a></div/>
<tt class="test-result-log-sample">(truncated)<br>

uninstalling 'hello-2.10'<br>

building '/nix/store/xsk9wjy0dpp7w7d3r3bkzxzaklqdzq6q-user-environment.drv'...<br>

created 0 symlinks in user environment<br>
<tt>
</td>


</tr>


<tr class="result-status-row"><td class="scenario-name">ssh</td>

<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 1</span> in 0s <a href="#install-default-macos-sierra-ssh-testexitfail">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitfail<br>

 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-sierra-ssh-testshell">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testshell<br>

 ./testscript::testshell::16 nix-shell -p hello --run hello<br>

./testscript: line 16: nix-shell: command not found<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 0s <a href="#install-default-macos-sierra-ssh-testexitok">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitok<br>

 ./testscript::testexitok::8 /bin/bash -c 'exit 0'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-sierra-ssh-testnixchannel">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixchannel<br>

 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03<br>

./testscript: line 26: nix-channel: command not found<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-sierra-ssh-testnixenv">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixenv<br>

 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello<br>

./testscript: line 20: nix-env: command not found<br>
<tt>
</td>


</tr>


<tr class="result-status-row"><td class="scenario-name">interactive</td>

<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 1</span> in 0s <a href="#install-default-macos-sierra-interactive-testexitfail">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitfail<br>

 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-sierra-interactive-testshell">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testshell<br>

 ./testscript::testshell::16 nix-shell -p hello --run hello<br>

./testscript: line 16: nix-shell: command not found<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 0s <a href="#install-default-macos-sierra-interactive-testexitok">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitok<br>

 ./testscript::testexitok::8 /bin/bash -c 'exit 0'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-sierra-interactive-testnixchannel">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixchannel<br>

 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03<br>

./testscript: line 26: nix-channel: command not found<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-sierra-interactive-testnixenv">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixenv<br>

 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello<br>

./testscript: line 20: nix-env: command not found<br>
<tt>
</td>


</tr>


<tr class="result-status-row"><td class="scenario-name">login</td>

<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 1</span> in 0s <a href="#install-default-macos-sierra-login-testexitfail">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitfail<br>

 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-sierra-login-testshell">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testshell<br>

 ./testscript::testshell::16 nix-shell -p hello --run hello<br>

./testscript: line 16: nix-shell: command not found<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 0s <a href="#install-default-macos-sierra-login-testexitok">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitok<br>

 ./testscript::testexitok::8 /bin/bash -c 'exit 0'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 1s <a href="#install-default-macos-sierra-login-testnixchannel">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixchannel<br>

 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03<br>

./testscript: line 26: nix-channel: command not found<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-sierra-login-testnixenv">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixenv<br>

 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello<br>

./testscript: line 20: nix-env: command not found<br>
<tt>
</td>


</tr>




  <tr class="environment-row">
    <th colspan=2 class="environment-name">install-default-macos-highsierra-upgrade-simulation</th>
    <td class=testcase-name>testexitfail</td>
<td class=testcase-name>testshell</td>
<td class=testcase-name>testexitok</td>
<td class=testcase-name>testnixchannel</td>
<td class=testcase-name>testnixenv</td>
  </tr>
  <tr class="environment-details-row">
    <td rowspan=5 class="environment-details-cell">
<p><strong>Vagrantfile:</strong><br /><a href="#detail-install-default-macos-highsierra-upgrade-simulation-Vagrantfile">(see full dataset)</a></p>
<p><strong>image-name:</strong> <tt>macos-highsierra-upgrade-simulation
</tt></p>
<p><strong>install-method:</strong> <tt>install-default
</tt></p>
<p><strong>run-log:</strong><br /><a href="#detail-install-default-macos-highsierra-upgrade-simulation-run-log">(see full dataset)</a></p>
    </td>
    <td colspan=4>&nbsp</td>
  </tr>

<tr class="result-status-row"><td class="scenario-name">login-interactive</td>

<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 1</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-login-interactive-testexitfail">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitfail<br>

 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 3s <a href="#install-default-macos-highsierra-upgrade-simulation-login-interactive-testshell">(full log)</a></div/>
<tt class="test-result-log-sample">(truncated)<br>

  /nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10<br>

copying path '/nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10' from 'https://cache.nixos.org'...<br>

Hello, world!<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-login-interactive-testexitok">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitok<br>

 ./testscript::testexitok::8 /bin/bash -c 'exit 0'<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 27s <a href="#install-default-macos-highsierra-upgrade-simulation-login-interactive-testnixchannel">(full log)</a></div/>
<tt class="test-result-log-sample">(truncated)<br>

Hello, world!<br>

 ./testscript::testnixchannel::30 nix-env --uninstall 'hello.*'<br>

uninstalling 'hello-2.10'<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-login-interactive-testnixenv">(full log)</a></div/>
<tt class="test-result-log-sample">(truncated)<br>

uninstalling 'hello-2.10'<br>

building '/nix/store/xsk9wjy0dpp7w7d3r3bkzxzaklqdzq6q-user-environment.drv'...<br>

created 0 symlinks in user environment<br>
<tt>
</td>


</tr>


<tr class="result-status-row"><td class="scenario-name">ssh</td>

<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 1</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-ssh-testexitfail">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitfail<br>

 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-ssh-testshell">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testshell<br>

 ./testscript::testshell::16 nix-shell -p hello --run hello<br>

./testscript: line 16: nix-shell: command not found<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-ssh-testexitok">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitok<br>

 ./testscript::testexitok::8 /bin/bash -c 'exit 0'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-ssh-testnixchannel">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixchannel<br>

 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03<br>

./testscript: line 26: nix-channel: command not found<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-ssh-testnixenv">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixenv<br>

 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello<br>

./testscript: line 20: nix-env: command not found<br>
<tt>
</td>


</tr>


<tr class="result-status-row"><td class="scenario-name">interactive</td>

<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 1</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-interactive-testexitfail">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitfail<br>

 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-interactive-testshell">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testshell<br>

 ./testscript::testshell::16 nix-shell -p hello --run hello<br>

./testscript: line 16: nix-shell: command not found<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-interactive-testexitok">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitok<br>

 ./testscript::testexitok::8 /bin/bash -c 'exit 0'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-interactive-testnixchannel">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixchannel<br>

 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03<br>

./testscript: line 26: nix-channel: command not found<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-interactive-testnixenv">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixenv<br>

 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello<br>

./testscript: line 20: nix-env: command not found<br>
<tt>
</td>


</tr>


<tr class="result-status-row"><td class="scenario-name">login</td>

<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 1</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-login-testexitfail">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitfail<br>

 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-login-testshell">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testshell<br>

 ./testscript::testshell::16 nix-shell -p hello --run hello<br>

./testscript: line 16: nix-shell: command not found<br>
<tt>
</td>



<td class="test-result test-result-pass">
<div class="test-result-summary"><span class=test-result-pass>pass</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-login-testexitok">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testexitok<br>

 ./testscript::testexitok::8 /bin/bash -c 'exit 0'<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-login-testnixchannel">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixchannel<br>

 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03<br>

./testscript: line 26: nix-channel: command not found<br>
<tt>
</td>



<td class="test-result test-result-fail">
<div class="test-result-summary"><span class=test-result-fail>exit code 127</span> in 0s <a href="#install-default-macos-highsierra-upgrade-simulation-login-testnixenv">(full log)</a></div/>
<tt class="test-result-log-sample">./testscript::runtest::43 testnixenv<br>

 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello<br>

./testscript: line 20: nix-env: command not found<br>
<tt>
</td>


</tr>



</table>
<h1>all logs</h1>

<h2 id="install-default-macos-sierra-login-interactive-testexitok">install-default-macos-sierra-login-interactive-testexitok</h2>
<pre>
 ./testscript::runtest::43 testexitok
 ./testscript::testexitok::8 /bin/bash -c 'exit 0'

</pre>


<h2 id="install-default-macos-sierra-login-interactive-testnixchannel">install-default-macos-sierra-login-interactive-testnixchannel</h2>
<pre>
 ./testscript::runtest::43 testnixchannel
 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
 ./testscript::testnixchannel::27 nix-channel --update
unpacking channels...
created 2 symlinks in user environment
 ./testscript::testnixchannel::28 nix-env -iA nixos-18-03.hello
installing 'hello-2.10'
these paths will be fetched (8.97 MiB download, 47.60 MiB unpacked):
  /nix/store/cr3s0wfg4b0vpqf4avxbs2cjyh8ik8x5-hello-2.10
  /nix/store/gagv3nkbppdjb78csszx77agzdzlpg46-libc++-5.0.2
  /nix/store/madyr371ywi25cyd0ac6l4jgbpfks0l2-ICU-osx-10.10.5
  /nix/store/n424yw4ws0hmaps1gh26g4hdibfimc8k-libc++abi-5.0.2
  /nix/store/yvkvyvc36l2dmwl22vajc8bdg7fv3p6b-Libsystem-osx-10.11.6
  /nix/store/z9lvlxdmlbwg00j2drhwm8b6f8j4xqx5-CF-osx-10.10.5
copying path '/nix/store/yvkvyvc36l2dmwl22vajc8bdg7fv3p6b-Libsystem-osx-10.11.6' from 'https://cache.nixos.org'...
copying path '/nix/store/n424yw4ws0hmaps1gh26g4hdibfimc8k-libc++abi-5.0.2' from 'https://cache.nixos.org'...
copying path '/nix/store/gagv3nkbppdjb78csszx77agzdzlpg46-libc++-5.0.2' from 'https://cache.nixos.org'...
copying path '/nix/store/madyr371ywi25cyd0ac6l4jgbpfks0l2-ICU-osx-10.10.5' from 'https://cache.nixos.org'...
copying path '/nix/store/z9lvlxdmlbwg00j2drhwm8b6f8j4xqx5-CF-osx-10.10.5' from 'https://cache.nixos.org'...
copying path '/nix/store/cr3s0wfg4b0vpqf4avxbs2cjyh8ik8x5-hello-2.10' from 'https://cache.nixos.org'...
building '/nix/store/796cy480iaqz51d3bmwsdw478zg4rfg9-user-environment.drv'...
created 2 symlinks in user environment
 ./testscript::testnixchannel::29 hello
Hello, world!
 ./testscript::testnixchannel::30 nix-env --uninstall 'hello.*'
uninstalling 'hello-2.10'

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-ssh-testshell">install-default-macos-highsierra-upgrade-simulation-ssh-testshell</h2>
<pre>
 ./testscript::runtest::43 testshell
 ./testscript::testshell::16 nix-shell -p hello --run hello
./testscript: line 16: nix-shell: command not found

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-interactive-testexitfail">install-default-macos-highsierra-upgrade-simulation-interactive-testexitfail</h2>
<pre>
 ./testscript::runtest::43 testexitfail
 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'

</pre>


<h2 id="install-default-macos-sierra-login-interactive-testshell">install-default-macos-sierra-login-interactive-testshell</h2>
<pre>
 ./testscript::runtest::43 testshell
 ./testscript::testshell::16 nix-shell -p hello --run hello
these paths will be fetched (0.02 MiB download, 0.07 MiB unpacked):
  /nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10
copying path '/nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10' from 'https://cache.nixos.org'...
Hello, world!

</pre>


<h2 id="install-default-macos-highsierra-login-testnixchannel">install-default-macos-highsierra-login-testnixchannel</h2>
<pre>
 ./testscript::runtest::43 testnixchannel
 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
./testscript: line 26: nix-channel: command not found

</pre>


<h2 id="install-default-macos-highsierra-ssh-testshell">install-default-macos-highsierra-ssh-testshell</h2>
<pre>
 ./testscript::runtest::43 testshell
 ./testscript::testshell::16 nix-shell -p hello --run hello
./testscript: line 16: nix-shell: command not found

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-interactive-testexitok">install-default-macos-highsierra-upgrade-simulation-interactive-testexitok</h2>
<pre>
 ./testscript::runtest::43 testexitok
 ./testscript::testexitok::8 /bin/bash -c 'exit 0'

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-login-interactive-testnixenv">install-default-macos-highsierra-upgrade-simulation-login-interactive-testnixenv</h2>
<pre>
 ./testscript::runtest::43 testnixenv
 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
installing 'hello-2.10'
building '/nix/store/l0hp7hmcppm59dw0klxnvyybgdi2xl50-user-environment.drv'...
created 2 symlinks in user environment
 ./testscript::testnixenv::21 hello
Hello, world!
 ./testscript::testnixenv::22 nix-env --uninstall 'hello.*'
uninstalling 'hello-2.10'
building '/nix/store/xsk9wjy0dpp7w7d3r3bkzxzaklqdzq6q-user-environment.drv'...
created 0 symlinks in user environment

</pre>


<h2 id="install-default-macos-sierra-login-testexitok">install-default-macos-sierra-login-testexitok</h2>
<pre>
 ./testscript::runtest::43 testexitok
 ./testscript::testexitok::8 /bin/bash -c 'exit 0'

</pre>


<h2 id="install-default-macos-highsierra-login-testnixenv">install-default-macos-highsierra-login-testnixenv</h2>
<pre>
 ./testscript::runtest::43 testnixenv
 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
./testscript: line 20: nix-env: command not found

</pre>


<h2 id="install-default-macos-highsierra-login-interactive-testshell">install-default-macos-highsierra-login-interactive-testshell</h2>
<pre>
 ./testscript::runtest::43 testshell
 ./testscript::testshell::16 nix-shell -p hello --run hello
these paths will be fetched (0.02 MiB download, 0.07 MiB unpacked):
  /nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10
copying path '/nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10' from 'https://cache.nixos.org'...
Hello, world!

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-login-testshell">install-default-macos-highsierra-upgrade-simulation-login-testshell</h2>
<pre>
 ./testscript::runtest::43 testshell
 ./testscript::testshell::16 nix-shell -p hello --run hello
./testscript: line 16: nix-shell: command not found

</pre>


<h2 id="install-default-macos-highsierra-ssh-testnixchannel">install-default-macos-highsierra-ssh-testnixchannel</h2>
<pre>
 ./testscript::runtest::43 testnixchannel
 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
./testscript: line 26: nix-channel: command not found

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-login-testexitfail">install-default-macos-highsierra-upgrade-simulation-login-testexitfail</h2>
<pre>
 ./testscript::runtest::43 testexitfail
 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'

</pre>


<h2 id="install-default-macos-highsierra-ssh-testexitok">install-default-macos-highsierra-ssh-testexitok</h2>
<pre>
 ./testscript::runtest::43 testexitok
 ./testscript::testexitok::8 /bin/bash -c 'exit 0'

</pre>


<h2 id="install-default-macos-sierra-login-testnixchannel">install-default-macos-sierra-login-testnixchannel</h2>
<pre>
 ./testscript::runtest::43 testnixchannel
 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
./testscript: line 26: nix-channel: command not found

</pre>


<h2 id="install-default-macos-highsierra-interactive-testexitok">install-default-macos-highsierra-interactive-testexitok</h2>
<pre>
 ./testscript::runtest::43 testexitok
 ./testscript::testexitok::8 /bin/bash -c 'exit 0'

</pre>


<h2 id="install-default-macos-highsierra-interactive-testshell">install-default-macos-highsierra-interactive-testshell</h2>
<pre>
 ./testscript::runtest::43 testshell
 ./testscript::testshell::16 nix-shell -p hello --run hello
./testscript: line 16: nix-shell: command not found

</pre>


<h2 id="install-default-macos-highsierra-login-interactive-testnixchannel">install-default-macos-highsierra-login-interactive-testnixchannel</h2>
<pre>
 ./testscript::runtest::43 testnixchannel
 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
 ./testscript::testnixchannel::27 nix-channel --update
unpacking channels...
created 2 symlinks in user environment
 ./testscript::testnixchannel::28 nix-env -iA nixos-18-03.hello
installing 'hello-2.10'
these paths will be fetched (8.97 MiB download, 47.60 MiB unpacked):
  /nix/store/cr3s0wfg4b0vpqf4avxbs2cjyh8ik8x5-hello-2.10
  /nix/store/gagv3nkbppdjb78csszx77agzdzlpg46-libc++-5.0.2
  /nix/store/madyr371ywi25cyd0ac6l4jgbpfks0l2-ICU-osx-10.10.5
  /nix/store/n424yw4ws0hmaps1gh26g4hdibfimc8k-libc++abi-5.0.2
  /nix/store/yvkvyvc36l2dmwl22vajc8bdg7fv3p6b-Libsystem-osx-10.11.6
  /nix/store/z9lvlxdmlbwg00j2drhwm8b6f8j4xqx5-CF-osx-10.10.5
copying path '/nix/store/yvkvyvc36l2dmwl22vajc8bdg7fv3p6b-Libsystem-osx-10.11.6' from 'https://cache.nixos.org'...
copying path '/nix/store/n424yw4ws0hmaps1gh26g4hdibfimc8k-libc++abi-5.0.2' from 'https://cache.nixos.org'...
copying path '/nix/store/gagv3nkbppdjb78csszx77agzdzlpg46-libc++-5.0.2' from 'https://cache.nixos.org'...
copying path '/nix/store/madyr371ywi25cyd0ac6l4jgbpfks0l2-ICU-osx-10.10.5' from 'https://cache.nixos.org'...
copying path '/nix/store/z9lvlxdmlbwg00j2drhwm8b6f8j4xqx5-CF-osx-10.10.5' from 'https://cache.nixos.org'...
copying path '/nix/store/cr3s0wfg4b0vpqf4avxbs2cjyh8ik8x5-hello-2.10' from 'https://cache.nixos.org'...
building '/nix/store/796cy480iaqz51d3bmwsdw478zg4rfg9-user-environment.drv'...
created 2 symlinks in user environment
 ./testscript::testnixchannel::29 hello
Hello, world!
 ./testscript::testnixchannel::30 nix-env --uninstall 'hello.*'
uninstalling 'hello-2.10'

</pre>


<h2 id="install-default-macos-sierra-interactive-testexitok">install-default-macos-sierra-interactive-testexitok</h2>
<pre>
 ./testscript::runtest::43 testexitok
 ./testscript::testexitok::8 /bin/bash -c 'exit 0'

</pre>


<h2 id="install-default-macos-sierra-login-testshell">install-default-macos-sierra-login-testshell</h2>
<pre>
 ./testscript::runtest::43 testshell
 ./testscript::testshell::16 nix-shell -p hello --run hello
./testscript: line 16: nix-shell: command not found

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-ssh-testexitok">install-default-macos-highsierra-upgrade-simulation-ssh-testexitok</h2>
<pre>
 ./testscript::runtest::43 testexitok
 ./testscript::testexitok::8 /bin/bash -c 'exit 0'

</pre>


<h2 id="install-default-macos-highsierra-interactive-testexitfail">install-default-macos-highsierra-interactive-testexitfail</h2>
<pre>
 ./testscript::runtest::43 testexitfail
 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-ssh-testnixchannel">install-default-macos-highsierra-upgrade-simulation-ssh-testnixchannel</h2>
<pre>
 ./testscript::runtest::43 testnixchannel
 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
./testscript: line 26: nix-channel: command not found

</pre>


<h2 id="install-default-macos-highsierra-login-testexitfail">install-default-macos-highsierra-login-testexitfail</h2>
<pre>
 ./testscript::runtest::43 testexitfail
 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-login-testnixenv">install-default-macos-highsierra-upgrade-simulation-login-testnixenv</h2>
<pre>
 ./testscript::runtest::43 testnixenv
 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
./testscript: line 20: nix-env: command not found

</pre>


<h2 id="install-default-macos-highsierra-ssh-testexitfail">install-default-macos-highsierra-ssh-testexitfail</h2>
<pre>
 ./testscript::runtest::43 testexitfail
 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-login-testexitok">install-default-macos-highsierra-upgrade-simulation-login-testexitok</h2>
<pre>
 ./testscript::runtest::43 testexitok
 ./testscript::testexitok::8 /bin/bash -c 'exit 0'

</pre>


<h2 id="install-default-macos-sierra-login-interactive-testnixenv">install-default-macos-sierra-login-interactive-testnixenv</h2>
<pre>
 ./testscript::runtest::43 testnixenv
 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
installing 'hello-2.10'
building '/nix/store/l0hp7hmcppm59dw0klxnvyybgdi2xl50-user-environment.drv'...
created 2 symlinks in user environment
 ./testscript::testnixenv::21 hello
Hello, world!
 ./testscript::testnixenv::22 nix-env --uninstall 'hello.*'
uninstalling 'hello-2.10'
building '/nix/store/xsk9wjy0dpp7w7d3r3bkzxzaklqdzq6q-user-environment.drv'...
created 0 symlinks in user environment

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-ssh-testexitfail">install-default-macos-highsierra-upgrade-simulation-ssh-testexitfail</h2>
<pre>
 ./testscript::runtest::43 testexitfail
 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'

</pre>


<h2 id="install-default-macos-sierra-ssh-testexitok">install-default-macos-sierra-ssh-testexitok</h2>
<pre>
 ./testscript::runtest::43 testexitok
 ./testscript::testexitok::8 /bin/bash -c 'exit 0'

</pre>


<h2 id="install-default-macos-sierra-login-testnixenv">install-default-macos-sierra-login-testnixenv</h2>
<pre>
 ./testscript::runtest::43 testnixenv
 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
./testscript: line 20: nix-env: command not found

</pre>


<h2 id="install-default-macos-sierra-interactive-testexitfail">install-default-macos-sierra-interactive-testexitfail</h2>
<pre>
 ./testscript::runtest::43 testexitfail
 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'

</pre>


<h2 id="install-default-macos-sierra-ssh-testnixchannel">install-default-macos-sierra-ssh-testnixchannel</h2>
<pre>
 ./testscript::runtest::43 testnixchannel
 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
./testscript: line 26: nix-channel: command not found

</pre>


<h2 id="install-default-macos-highsierra-interactive-testnixenv">install-default-macos-highsierra-interactive-testnixenv</h2>
<pre>
 ./testscript::runtest::43 testnixenv
 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
./testscript: line 20: nix-env: command not found

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-interactive-testnixchannel">install-default-macos-highsierra-upgrade-simulation-interactive-testnixchannel</h2>
<pre>
 ./testscript::runtest::43 testnixchannel
 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
./testscript: line 26: nix-channel: command not found

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-login-interactive-testshell">install-default-macos-highsierra-upgrade-simulation-login-interactive-testshell</h2>
<pre>
 ./testscript::runtest::43 testshell
 ./testscript::testshell::16 nix-shell -p hello --run hello
these paths will be fetched (0.02 MiB download, 0.07 MiB unpacked):
  /nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10
copying path '/nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10' from 'https://cache.nixos.org'...
Hello, world!

</pre>


<h2 id="install-default-macos-highsierra-login-testshell">install-default-macos-highsierra-login-testshell</h2>
<pre>
 ./testscript::runtest::43 testshell
 ./testscript::testshell::16 nix-shell -p hello --run hello
./testscript: line 16: nix-shell: command not found

</pre>


<h2 id="install-default-macos-sierra-interactive-testnixchannel">install-default-macos-sierra-interactive-testnixchannel</h2>
<pre>
 ./testscript::runtest::43 testnixchannel
 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
./testscript: line 26: nix-channel: command not found

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-login-testnixchannel">install-default-macos-highsierra-upgrade-simulation-login-testnixchannel</h2>
<pre>
 ./testscript::runtest::43 testnixchannel
 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
./testscript: line 26: nix-channel: command not found

</pre>


<h2 id="install-default-macos-highsierra-interactive-testnixchannel">install-default-macos-highsierra-interactive-testnixchannel</h2>
<pre>
 ./testscript::runtest::43 testnixchannel
 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
./testscript: line 26: nix-channel: command not found

</pre>


<h2 id="install-default-macos-highsierra-login-interactive-testnixenv">install-default-macos-highsierra-login-interactive-testnixenv</h2>
<pre>
 ./testscript::runtest::43 testnixenv
 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
installing 'hello-2.10'
building '/nix/store/l0hp7hmcppm59dw0klxnvyybgdi2xl50-user-environment.drv'...
created 2 symlinks in user environment
 ./testscript::testnixenv::21 hello
Hello, world!
 ./testscript::testnixenv::22 nix-env --uninstall 'hello.*'
uninstalling 'hello-2.10'
building '/nix/store/xsk9wjy0dpp7w7d3r3bkzxzaklqdzq6q-user-environment.drv'...
created 0 symlinks in user environment

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-login-interactive-testexitok">install-default-macos-highsierra-upgrade-simulation-login-interactive-testexitok</h2>
<pre>
 ./testscript::runtest::43 testexitok
 ./testscript::testexitok::8 /bin/bash -c 'exit 0'

</pre>


<h2 id="install-default-macos-sierra-ssh-testshell">install-default-macos-sierra-ssh-testshell</h2>
<pre>
 ./testscript::runtest::43 testshell
 ./testscript::testshell::16 nix-shell -p hello --run hello
./testscript: line 16: nix-shell: command not found

</pre>


<h2 id="install-default-macos-highsierra-ssh-testnixenv">install-default-macos-highsierra-ssh-testnixenv</h2>
<pre>
 ./testscript::runtest::43 testnixenv
 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
./testscript: line 20: nix-env: command not found

</pre>


<h2 id="install-default-macos-highsierra-login-testexitok">install-default-macos-highsierra-login-testexitok</h2>
<pre>
 ./testscript::runtest::43 testexitok
 ./testscript::testexitok::8 /bin/bash -c 'exit 0'

</pre>


<h2 id="install-default-macos-sierra-ssh-testexitfail">install-default-macos-sierra-ssh-testexitfail</h2>
<pre>
 ./testscript::runtest::43 testexitfail
 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-ssh-testnixenv">install-default-macos-highsierra-upgrade-simulation-ssh-testnixenv</h2>
<pre>
 ./testscript::runtest::43 testnixenv
 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
./testscript: line 20: nix-env: command not found

</pre>


<h2 id="install-default-macos-sierra-interactive-testshell">install-default-macos-sierra-interactive-testshell</h2>
<pre>
 ./testscript::runtest::43 testshell
 ./testscript::testshell::16 nix-shell -p hello --run hello
./testscript: line 16: nix-shell: command not found

</pre>


<h2 id="install-default-macos-sierra-ssh-testnixenv">install-default-macos-sierra-ssh-testnixenv</h2>
<pre>
 ./testscript::runtest::43 testnixenv
 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
./testscript: line 20: nix-env: command not found

</pre>


<h2 id="install-default-macos-sierra-login-testexitfail">install-default-macos-sierra-login-testexitfail</h2>
<pre>
 ./testscript::runtest::43 testexitfail
 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-interactive-testshell">install-default-macos-highsierra-upgrade-simulation-interactive-testshell</h2>
<pre>
 ./testscript::runtest::43 testshell
 ./testscript::testshell::16 nix-shell -p hello --run hello
./testscript: line 16: nix-shell: command not found

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-login-interactive-testexitfail">install-default-macos-highsierra-upgrade-simulation-login-interactive-testexitfail</h2>
<pre>
 ./testscript::runtest::43 testexitfail
 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'

</pre>


<h2 id="install-default-macos-sierra-login-interactive-testexitfail">install-default-macos-sierra-login-interactive-testexitfail</h2>
<pre>
 ./testscript::runtest::43 testexitfail
 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'

</pre>


<h2 id="install-default-macos-highsierra-login-interactive-testexitfail">install-default-macos-highsierra-login-interactive-testexitfail</h2>
<pre>
 ./testscript::runtest::43 testexitfail
 ./testscript::testexitfail::12 /bin/bash -c 'exit 1'

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-interactive-testnixenv">install-default-macos-highsierra-upgrade-simulation-interactive-testnixenv</h2>
<pre>
 ./testscript::runtest::43 testnixenv
 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
./testscript: line 20: nix-env: command not found

</pre>


<h2 id="install-default-macos-sierra-interactive-testnixenv">install-default-macos-sierra-interactive-testnixenv</h2>
<pre>
 ./testscript::runtest::43 testnixenv
 ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
./testscript: line 20: nix-env: command not found

</pre>


<h2 id="install-default-macos-highsierra-login-interactive-testexitok">install-default-macos-highsierra-login-interactive-testexitok</h2>
<pre>
 ./testscript::runtest::43 testexitok
 ./testscript::testexitok::8 /bin/bash -c 'exit 0'

</pre>


<h2 id="install-default-macos-highsierra-upgrade-simulation-login-interactive-testnixchannel">install-default-macos-highsierra-upgrade-simulation-login-interactive-testnixchannel</h2>
<pre>
 ./testscript::runtest::43 testnixchannel
 ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
 ./testscript::testnixchannel::27 nix-channel --update
unpacking channels...
created 2 symlinks in user environment
 ./testscript::testnixchannel::28 nix-env -iA nixos-18-03.hello
installing 'hello-2.10'
these paths will be fetched (8.97 MiB download, 47.60 MiB unpacked):
  /nix/store/cr3s0wfg4b0vpqf4avxbs2cjyh8ik8x5-hello-2.10
  /nix/store/gagv3nkbppdjb78csszx77agzdzlpg46-libc++-5.0.2
  /nix/store/madyr371ywi25cyd0ac6l4jgbpfks0l2-ICU-osx-10.10.5
  /nix/store/n424yw4ws0hmaps1gh26g4hdibfimc8k-libc++abi-5.0.2
  /nix/store/yvkvyvc36l2dmwl22vajc8bdg7fv3p6b-Libsystem-osx-10.11.6
  /nix/store/z9lvlxdmlbwg00j2drhwm8b6f8j4xqx5-CF-osx-10.10.5
copying path '/nix/store/yvkvyvc36l2dmwl22vajc8bdg7fv3p6b-Libsystem-osx-10.11.6' from 'https://cache.nixos.org'...
copying path '/nix/store/n424yw4ws0hmaps1gh26g4hdibfimc8k-libc++abi-5.0.2' from 'https://cache.nixos.org'...
copying path '/nix/store/gagv3nkbppdjb78csszx77agzdzlpg46-libc++-5.0.2' from 'https://cache.nixos.org'...
copying path '/nix/store/madyr371ywi25cyd0ac6l4jgbpfks0l2-ICU-osx-10.10.5' from 'https://cache.nixos.org'...
copying path '/nix/store/z9lvlxdmlbwg00j2drhwm8b6f8j4xqx5-CF-osx-10.10.5' from 'https://cache.nixos.org'...
copying path '/nix/store/cr3s0wfg4b0vpqf4avxbs2cjyh8ik8x5-hello-2.10' from 'https://cache.nixos.org'...
building '/nix/store/796cy480iaqz51d3bmwsdw478zg4rfg9-user-environment.drv'...
created 2 symlinks in user environment
 ./testscript::testnixchannel::29 hello
Hello, world!
 ./testscript::testnixchannel::30 nix-env --uninstall 'hello.*'
uninstalling 'hello-2.10'

</pre>

<h1>all details</h1>
<h2 id="detail-install-default-macos-highsierra-run-log">install-default-macos-highsierra-run-log</h1><pre>Bringing machine 'default' up with 'virtualbox' provider...
==> default: Importing base box 'monsenso/macos-10.13'...
[KProgress: 10%[KProgress: 20%[KProgress: 30%[KProgress: 40%[KProgress: 50%[KProgress: 60%[KProgress: 70%[KProgress: 80%[KProgress: 90%[K==> default: Matching MAC address for NAT networking...
==> default: Checking if box 'monsenso/macos-10.13' is up to date...
==> default: Setting the name of the VM: tmpXxm6En278s_default_1535034013906_42934
==> default: Clearing any previously set network interfaces...
==> default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==> default: Forwarding ports...
    default: 22 (guest) => 2222 (host) (adapter 1)
==> default: Running 'pre-boot' VM customizations...
==> default: Booting VM...
==> default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: 
    default: Vagrant insecure key detected. Vagrant will automatically replace
    default: this with a newly generated keypair for better security.
    default: 
    default: Inserting generated public key within guest...
    default: Removing insecure key from the guest if it's present...
    default: Key inserted! Disconnecting and reconnecting using new SSH key...
==> default: Machine booted and ready!
==> default: Checking for guest additions in VM...
    default: No guest additions were detected on the base box for this VM! Guest
    default: additions are required for forwarded ports, shared folders, host only
    default: networking, and more. If SSH fails on this machine, please install
    default: the guest additions and repackage the box to continue.
    default: 
    default: This is not an error message; everything may continue to work properly,
    default: in which case you may ignore this message.
==> default: Running provisioner: shell...
    default: Running: inline script
==> default: Running provisioner: shell...
    default: Running: inline script
    default: No preInstallUnprivileged rules.
#!/bin/sh

set -eux

curl custom-install-thing | bash
#!/usr/bin/env bash

export PS4=' ''${BASH_SOURCE}::''${FUNCNAME[0]}::$LINENO '
set -u
set -o pipefail

testexitok() (
    /bin/bash -c "exit 0"
)

testexitfail() (
    /bin/bash -c "exit 1"
)

testshell() (
  nix-shell -p hello --run hello
)

testnixenv() (
  nix-env -iA nixpkgs.hello
  hello
  nix-env --uninstall 'hello.*'
)

testnixchannel() (
  nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
  nix-channel --update
  nix-env -iA nixos-18-03.hello
  hello
  nix-env --uninstall 'hello.*'
)

runtest() {
    testFn=$1

    local testdir="$TESTDIR/tests/$testFn"
    mkdir -p "$testdir"

    start=$(date '+%s')
    echo "Starting: $testFn"
    (
        set -ex
        "$testFn"
    ) 2>&1 | tee "$testdir/log" | sed 's/^/    /'
    exitcode=$?
    end=$(date '+%s')
    duration=$((end - start))
    echo "$exitcode" > "$testdir/exitcode"
    echo "$duration" > "$testdir/duration"

    echo "Finishing: $testFn, duration:$duration result:$exitcode"
}

main() {
    readonly TESTDIR=./nix-test-matrix-log
    rm -rf "$TESTDIR"
    mkdir "$TESTDIR"

    uname -a > "$TESTDIR/uname"
    nix-shell -p nix-info --run "nix-info -m" > "$TESTDIR/nix-info"
    (
        runtest testexitok
        runtest testexitfail
        runtest testshell
        runtest testnixenv
        runtest testnixchannel
    )

    tar -cf ./nix-test-matrix-log.tar "$TESTDIR"
}

main
macos-highsierra-install    + curl custom-install-thing
macos-highsierra-install    + bash
macos-highsierra-install      % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
macos-highsierra-install                                     Dload  Upload   Total   Spent    Left  Speed
macos-highsierra-install      0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0 31  408k   31  130k    0     0   164k      0  0:00:02 --:--:--  0:00:02  164k 67  408k   67  274k    0     0   153k      0  0:00:02  0:00:01  0:00:01  153k100  408k  100  408k    0     0   153k      0  0:00:02  0:00:02 --:--:--  153k
macos-highsierra-install    Welcome to the foobar nix upstaller (updater/installer)!
macos-highsierra-install    We're going to make it so your system is running the right version of Nix with the right foobar-specific configuration!
macos-highsierra-install    First, we're going to do some first-pass validation to make sure we know how to work with your system.
macos-highsierra-install    Checking for curl...
macos-highsierra-install    OK
macos-highsierra-install    Checking for sudo...
macos-highsierra-install    OK
macos-highsierra-install    Checking for connectivity to foobar binrepo...
macos-highsierra-install    OK
macos-highsierra-install    OK, initial checks look good.
macos-highsierra-install    Now we need to check if you have Nix installed, and get it if not.
macos-highsierra-install    You don't have Nix installed yet, let's fix that.
macos-highsierra-install    Checking for connectivity to the NixOS.org binary cache...
macos-highsierra-install    OK, downloading and running the upstream installer.
macos-highsierra-install    downloading Nix 2.0.3 binary tarball for x86_64-darwin from 'https://nixos.org/releases/nix/nix-2.0.3/nix-2.0.3-x86_64-darwin.tar.bz2' to '/var/folders/k6/wch_wxzx43z04wmzdf61znqr0000gn/T/nix-binary-tarball-unpack.XXXXXXXXXX.QT9WlChC'...
macos-highsierra-install      % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
macos-highsierra-install                                     Dload  Upload   Total   Spent    Left  Speed
macos-highsierra-install      0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0 25.3M    0 16384    0     0  21303      0  0:20:46 --:--:--  0:20:46 21305  3 25.3M    3  864k    0     0   493k      0  0:00:52  0:00:01  0:00:51  493k  7 25.3M    7 1920k    0     0   703k      0  0:00:36  0:00:02  0:00:34  703k 11 25.3M   11 3088k    0     0   835k      0  0:00:31  0:00:03  0:00:28  835k 17 25.3M   17 4416k    0     0   943k      0  0:00:27  0:00:04  0:00:23  942k 22 25.3M   22 5824k    0     0  1024k      0  0:00:25  0:00:05  0:00:20 1181k 28 25.3M   28 7344k    0     0  1095k      0  0:00:23  0:00:06  0:00:17 1308k 34 25.3M   34 8976k    0     0  1167k      0  0:00:22  0:00:07  0:00:15 1422k 39 25.3M   39 10.0M    0     0  1186k      0  0:00:21  0:00:08  0:00:13 1446k 43 25.3M   43 11.0M    0     0  1163k      0  0:00:22  0:00:09  0:00:13 1369k 47 25.3M   47 12.0M    0     0  1150k      0  0:00:22  0:00:10  0:00:12 1293k 52 25.3M   52 13.1M    0     0  1153k      0  0:00:22  0:00:11  0:00:11 1230k 56 25.3M   56 14.4M    0     0  1164k      0  0:00:22  0:00:12  0:00:10 1158k 62 25.3M   62 15.7M    0     0  1180k      0  0:00:21  0:00:13  0:00:08 1171k 68 25.3M   68 17.2M    0     0  1203k      0  0:00:21  0:00:14  0:00:07 1281k 74 25.3M   74 18.8M    0     0  1228k      0  0:00:21  0:00:15  0:00:06 1396k 81 25.3M   81 20.5M    0     0  1259k      0  0:00:20  0:00:16  0:00:04 1506k 88 25.3M   88 22.2M    0     0  1291k      0  0:00:20  0:00:17  0:00:03 1613k 95 25.3M   95 24.2M    0     0  1328k      0  0:00:19  0:00:18  0:00:01 1731k100 25.3M  100 25.3M    0     0  1349k      0  0:00:19  0:00:19 --:--:-- 1821k
macos-highsierra-install    [1;31mSwitching to the Daemon-based Installer[0m
macos-highsierra-install    [38;32mWelcome to the Multi-User Nix Installation
macos-highsierra-install    [0m
macos-highsierra-install    This installation tool will set up your computer with the Nix package
macos-highsierra-install    manager. This will happen in a few stages:
macos-highsierra-install    
macos-highsierra-install    1. Make sure your computer doesn't already have Nix. If it does, I
macos-highsierra-install       will show you instructions on how to clean up your old one.
macos-highsierra-install    
macos-highsierra-install    2. Show you what we are going to install and where. Then we will ask
macos-highsierra-install       if you are ready to continue.
macos-highsierra-install    
macos-highsierra-install    3. Create the system users and groups that the Nix daemon uses to run
macos-highsierra-install       builds.
macos-highsierra-install    
macos-highsierra-install    4. Perform the basic installation of the Nix files daemon.
macos-highsierra-install    
macos-highsierra-install    5. Configure your shell to import special Nix Profile files, so you
macos-highsierra-install       can use Nix.
macos-highsierra-install    
macos-highsierra-install    6. Start the Nix daemon.
macos-highsierra-install    
macos-highsierra-install    [38;32m[38;4;32mWould you like to see a more detailed list of what we will do?
macos-highsierra-install    [0mNo TTY, assuming you would say yes :)
macos-highsierra-install    
macos-highsierra-install    We will:
macos-highsierra-install    
macos-highsierra-install     - make sure your computer doesn't already have Nix files
macos-highsierra-install       (if it does, I  will tell you how to clean them up.)
macos-highsierra-install     - create local users (see the list above for the users we'll make)
macos-highsierra-install     - create a local group (nixbld)
macos-highsierra-install     - install Nix in to /nix
macos-highsierra-install     - create a configuration file in /etc/nix
macos-highsierra-install     - set up the "default profile" by creating some Nix-related files in
macos-highsierra-install       /var/root
macos-highsierra-install     - back up /etc/bashrc to /etc/bashrc.backup-before-nix
macos-highsierra-install     - update /etc/bashrc to include some Nix configuration
macos-highsierra-install     - back up /etc/zshrc to /etc/zshrc.backup-before-nix
macos-highsierra-install     - update /etc/zshrc to include some Nix configuration
macos-highsierra-install     - load and start a LaunchDaemon (at /Library/LaunchDaemons/org.nixos.nix-daemon.plist) for nix-daemon
macos-highsierra-install    
macos-highsierra-install    [38;32m[38;4;32mReady to continue?
macos-highsierra-install    [0mNo TTY, assuming you would say yes :)
macos-highsierra-install    
macos-highsierra-install    [38;34m---- let's talk about sudo -----------------------------------------------------
macos-highsierra-install    [0mThis script is going to call sudo a lot. Normally, it would show you
macos-highsierra-install    exactly what commands it is running and why. However, the script is
macos-highsierra-install    run in a headless fashion, like this:
macos-highsierra-install    
macos-highsierra-install      $ curl https://nixos.org/nix/install | sh
macos-highsierra-install    
macos-highsierra-install    or maybe in a CI pipeline. Because of that, we're going to skip the
macos-highsierra-install    verbose output in the interest of brevity.
macos-highsierra-install    
macos-highsierra-install    If you would like to
macos-highsierra-install    see the output, try like this:
macos-highsierra-install    
macos-highsierra-install      $ curl -o install-nix https://nixos.org/nix/install
macos-highsierra-install      $ sh ./install-nix
macos-highsierra-install    
macos-highsierra-install    
macos-highsierra-install    [38;34m---- Nix config report ---------------------------------------------------------
macos-highsierra-install    [0m[38;1m        Temp Dir[0m:	/var/folders/k6/wch_wxzx43z04wmzdf61znqr0000gn/T/tmp.XXXXXXXXXX.PqKOYso2
macos-highsierra-install    [38;1m        Nix Root[0m:	/nix
macos-highsierra-install    [38;1m     Build Users[0m:	32
macos-highsierra-install    [38;1m  Build Group ID[0m:	30000
macos-highsierra-install    [38;1mBuild Group Name[0m:	nixbld
macos-highsierra-install    
macos-highsierra-install    [38;4;34mbuild users:
macos-highsierra-install    [0m[38;1m    Username[0m:	UID
macos-highsierra-install    [38;1m     nixbld1[0m:	30001
macos-highsierra-install    [38;1m     nixbld2[0m:	30002
macos-highsierra-install    [38;1m     nixbld3[0m:	30003
macos-highsierra-install    [38;1m     nixbld4[0m:	30004
macos-highsierra-install    [38;1m     nixbld5[0m:	30005
macos-highsierra-install    [38;1m     nixbld6[0m:	30006
macos-highsierra-install    [38;1m     nixbld7[0m:	30007
macos-highsierra-install    [38;1m     nixbld8[0m:	30008
macos-highsierra-install    [38;1m     nixbld9[0m:	30009
macos-highsierra-install    [38;1m     nixbld10[0m:	30010
macos-highsierra-install    [38;1m     nixbld11[0m:	30011
macos-highsierra-install    [38;1m     nixbld12[0m:	30012
macos-highsierra-install    [38;1m     nixbld13[0m:	30013
macos-highsierra-install    [38;1m     nixbld14[0m:	30014
macos-highsierra-install    [38;1m     nixbld15[0m:	30015
macos-highsierra-install    [38;1m     nixbld16[0m:	30016
macos-highsierra-install    [38;1m     nixbld17[0m:	30017
macos-highsierra-install    [38;1m     nixbld18[0m:	30018
macos-highsierra-install    [38;1m     nixbld19[0m:	30019
macos-highsierra-install    [38;1m     nixbld20[0m:	30020
macos-highsierra-install    [38;1m     nixbld21[0m:	30021
macos-highsierra-install    [38;1m     nixbld22[0m:	30022
macos-highsierra-install    [38;1m     nixbld23[0m:	30023
macos-highsierra-install    [38;1m     nixbld24[0m:	30024
macos-highsierra-install    [38;1m     nixbld25[0m:	30025
macos-highsierra-install    [38;1m     nixbld26[0m:	30026
macos-highsierra-install    [38;1m     nixbld27[0m:	30027
macos-highsierra-install    [38;1m     nixbld28[0m:	30028
macos-highsierra-install    [38;1m     nixbld29[0m:	30029
macos-highsierra-install    [38;1m     nixbld30[0m:	30030
macos-highsierra-install    [38;1m     nixbld31[0m:	30031
macos-highsierra-install    [38;1m     nixbld32[0m:	30032
macos-highsierra-install    
macos-highsierra-install    [38;32m[38;4;32mReady to continue?
macos-highsierra-install    [0mNo TTY, assuming you would say yes :)
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build group nixbld
macos-highsierra-install    [0m[38;1m            Created[0m:	Yes
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld1
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 1
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld2
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 2
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld3
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 3
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld4
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 4
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld5
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 5
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld6
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 6
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld7
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 7
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld8
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 8
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld9
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 9
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld10
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 10
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld11
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 11
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld12
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 12
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld13
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 13
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld14
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 14
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld15
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 15
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld16
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 16
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld17
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 17
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld18
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 18
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld19
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 19
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld20
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 20
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld21
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 21
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld22
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 22
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld23
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 23
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld24
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 24
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld25
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 25
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld26
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 26
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld27
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 27
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld28
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 28
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld29
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 29
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld30
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 30
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld31
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 31
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install    
macos-highsierra-install    [38;32m~~> Setting up the build user nixbld32
macos-highsierra-install    [0m[38;1m           Created[0m:	Yes
macos-highsierra-install    [38;1m            Hidden[0m:	Yes
macos-highsierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-highsierra-install    [38;1m              Note[0m:	Nix build user 32
macos-highsierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-highsierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-highsierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-highsierra-install          Alright! We have our first nix at /nix/store/2jp9d9qns3372hkx4k523hc1bbzkr4yp-nix-2.0.3
macos-highsierra-install          Just finished getting the nix database ready.
macos-highsierra-install    
macos-highsierra-install    # Nix
macos-highsierra-install    if [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then
macos-highsierra-install      . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'
macos-highsierra-install    fi
macos-highsierra-install    # End Nix
macos-highsierra-install    
macos-highsierra-install    
macos-highsierra-install    # Nix
macos-highsierra-install    if [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then
macos-highsierra-install      . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'
macos-highsierra-install    fi
macos-highsierra-install    # End Nix
macos-highsierra-install    
macos-highsierra-install    installing 'nix-2.0.3'
macos-highsierra-install    building '/nix/store/jp5371ld47218v5bzc6m5584l8b8w2n1-user-environment.drv'...
macos-highsierra-install    created 7 symlinks in user environment
macos-highsierra-install    unpacking channels...
macos-highsierra-install    created 2 symlinks in user environment
macos-highsierra-install    [38;32mAlright! We're done!
macos-highsierra-install    [0m
macos-highsierra-install    Before Nix will work in your existing shells, you'll need to close
macos-highsierra-install    them and open them again. Other than that, you should be ready to go.
macos-highsierra-install    
macos-highsierra-install    Try it! Open a new terminal, and type:
macos-highsierra-install    
macos-highsierra-install      $ nix-shell -p nix-info --run "nix-info -m"
macos-highsierra-install    
macos-highsierra-install    Thank you for using this installer. If you have any feedback, don't
macos-highsierra-install    hesitate:
macos-highsierra-install    
macos-highsierra-install    We'd love to help if you need it.
macos-highsierra-install    
macos-highsierra-install    If you can, open an issue at https://github.com/nixos/nix/issues
macos-highsierra-install    
macos-highsierra-install    Or feel free to contact the team,
macos-highsierra-install     - on IRC #nixos on irc.freenode.net
macos-highsierra-install     - on twitter @nixos_org
macos-highsierra-install    OK, Nix is installed.
macos-highsierra-install    Now we're going to hand-off control to the real upstaller, fetched from artifactory.
macos-highsierra-install    Determining the required path from Artifactory...
macos-highsierra-install    OK, pulling /nix/store/cb1av2jhzbhrvbcx4jafsrcpxszn531p-real-upstaller from Artifactory...
macos-highsierra-install    We're going to need to run under sudo for this part so we can fetch paths from the foobar binary cache even if it hasn't been configured system-wide yet.
macos-highsierra-install    OK, handing off to the real upstaller.
macos-highsierra-install    Updating Nix, foobar nix.conf, and the upstaller script for your system profile.
macos-highsierra-install    We're going to need to run under sudo for this part.
macos-highsierra-install    replacing old 'nix-2.0.3'
macos-highsierra-install    installing 'nix-2.0pre6137_e3cdcf89'
macos-highsierra-install    installing 'foobar-nix-config'
macos-highsierra-install    installing 'foobar-nix-upstaller'
macos-highsierra-install    installing 'foobar-ca-bundle'
macos-highsierra-install    installing 'linuxkit-builder'
macos-highsierra-install    building '/nix/store/slqwb9zapl6jm2i9qyccx5x5l5vxjzk7-user-environment.drv'...
macos-highsierra-install    created 23 symlinks in user environment
macos-highsierra-install    Updating system channels
macos-highsierra-install    unpacking channels...
macos-highsierra-install    created 2 symlinks in user environment
macos-highsierra-install    Restarting your system-wide nix-daemon process (will require sudo)
macos-highsierra-install    Installation successful!
macos-highsierra-install    Since this is your first time installing Nix, you may need to reopen your terminal or exit your session to get your environment set up right.
macos-highsierra-install    To test, see if running 'nix --version' succeeds.
macos-highsierra-test-login    ./testscript: line 60: nix-shell: command not found
macos-highsierra-test-login    Starting: testexitok
macos-highsierra-test-login         ./testscript::runtest::43 testexitok
macos-highsierra-test-login         ./testscript::testexitok::8 /bin/bash -c 'exit 0'
macos-highsierra-test-login    Finishing: testexitok, duration:0 result:0
macos-highsierra-test-login    Starting: testexitfail
macos-highsierra-test-login         ./testscript::runtest::43 testexitfail
macos-highsierra-test-login         ./testscript::testexitfail::12 /bin/bash -c 'exit 1'
macos-highsierra-test-login    Finishing: testexitfail, duration:0 result:1
macos-highsierra-test-login    Starting: testshell
macos-highsierra-test-login         ./testscript::runtest::43 testshell
macos-highsierra-test-login         ./testscript::testshell::16 nix-shell -p hello --run hello
macos-highsierra-test-login        ./testscript: line 16: nix-shell: command not found
macos-highsierra-test-login    Finishing: testshell, duration:0 result:127
macos-highsierra-test-login    Starting: testnixenv
macos-highsierra-test-login         ./testscript::runtest::43 testnixenv
macos-highsierra-test-login         ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
macos-highsierra-test-login        ./testscript: line 20: nix-env: command not found
macos-highsierra-test-login    Finishing: testnixenv, duration:0 result:127
macos-highsierra-test-login    Starting: testnixchannel
macos-highsierra-test-login         ./testscript::runtest::43 testnixchannel
macos-highsierra-test-login         ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
macos-highsierra-test-login        ./testscript: line 26: nix-channel: command not found
macos-highsierra-test-login    Finishing: testnixchannel, duration:0 result:127
macos-highsierra-test-login-interactive    these paths will be fetched (155.11 MiB download, 818.36 MiB unpacked):
macos-highsierra-test-login-interactive      /nix/store/04bnzqnqivgxrhly898ys6jhvb7r77z8-compiler-rt-5.0.2
macos-highsierra-test-login-interactive      /nix/store/0h6cl7wfja45d46gid9fyrpwf1xy2jns-bootstrap-stage2-clang-wrapper
macos-highsierra-test-login-interactive      /nix/store/14k27li9psmi201brzm3yhilm7nq0cfc-bzip2-1.0.6.0.1
macos-highsierra-test-login-interactive      /nix/store/19xwrnwwdhx278wd2hzf0f4fhd619fqv-clang-5.0.2
macos-highsierra-test-login-interactive      /nix/store/1vrn0x735avl7sq6mwf5h50slb4666j7-bash-interactive-4.4-p23-info
macos-highsierra-test-login-interactive      /nix/store/2571v4g663w2490rzm1qi4qrzj1qijw5-clang-5.0.2-lib
macos-highsierra-test-login-interactive      /nix/store/2kd8k0h7mkrwc444r9la48liyl2di3mx-cctools-port-895
macos-highsierra-test-login-interactive      /nix/store/2ws9cmamvr7xyvdg4d2nnd1bmr1zjrrq-bootstrap-tools
macos-highsierra-test-login-interactive      /nix/store/365x532d88lj3zyi84q1wmh00nlnr749-gnugrep-3.1
macos-highsierra-test-login-interactive      /nix/store/39mw7i8qjmvr94pqlx62znmkxw1ga17p-adv_cmds-osx-10.5.8-locale
macos-highsierra-test-login-interactive      /nix/store/3whkmrfls5pwdi5yxz8qfp7clsl17j7l-libffi-3.2.1
macos-highsierra-test-login-interactive      /nix/store/59rrgildqwf88nwrkf0xp3g1c46akf8k-Libsystem-osx-10.11.6
macos-highsierra-test-login-interactive      /nix/store/5im29qx9rni3w8l3j8i2yr22sin55kxv-cctools-binutils-darwin
macos-highsierra-test-login-interactive      /nix/store/6jmyb8qzjr77pnpflz3k95zyfhxd6x11-compiler-rt-5.0.2-dev
macos-highsierra-test-login-interactive      /nix/store/7hcnb7lk6q05zyq5g2x0yac89nk46yv8-bzip2-1.0.6.0.1-bin
macos-highsierra-test-login-interactive      /nix/store/7qw2hb02ychpaabvxs2yq16p1cc0i1jc-clang-wrapper-5.0.2
macos-highsierra-test-login-interactive      /nix/store/7vsmbgsp21kl7mvyp305ac13qzsh5bmk-gnutar-1.30
macos-highsierra-test-login-interactive      /nix/store/8jwl96k4va9bvcl8ds2rgjpq2073gbij-bash-interactive-4.4-p23
macos-highsierra-test-login-interactive      /nix/store/9a762m9ld7f6z0x5d47lvnnw2nd0f2xw-gettext-0.19.8.1
macos-highsierra-test-login-interactive      /nix/store/agvf6aqhvqszyjn4adb47rx008c1039k-ed-1.14.2
macos-highsierra-test-login-interactive      /nix/store/bc6vywbmvvwpk1bfk0dgpw3i192phlp3-libc++abi-5.0.2
macos-highsierra-test-login-interactive      /nix/store/c8zq9hdriqbm6cxlcdwkpqc3ivdbifz4-readline-7.0p5
macos-highsierra-test-login-interactive      /nix/store/cwgp49bjfc9hjmg63kcj3i2qyiqq1syl-ncurses-6.1
macos-highsierra-test-login-interactive      /nix/store/cwx4dshnbrjigh3g6zp1ln4wwdnm8agh-binutils-2.30
macos-highsierra-test-login-interactive      /nix/store/d3w7zyl2wdbl4ajilypfmn454d29c4pn-gzip-1.9
macos-highsierra-test-login-interactive      /nix/store/f0ymknfjldn3lsmxcm3wcrla2dp6bqiq-libc++-5.0.2
macos-highsierra-test-login-interactive      /nix/store/fjilysyz08s9vl1bdcf3vndndd4xfacj-bash-interactive-4.4-p23-dev
macos-highsierra-test-login-interactive      /nix/store/fsdil6i3g3lfpgmdvb22gbf9fm3pjr35-cctools-binutils-darwin-wrapper
macos-highsierra-test-login-interactive      /nix/store/g309ikgbr76zzn4809swx0j89qqlqygz-nix-info
macos-highsierra-test-login-interactive      /nix/store/gvxxgcbrxrvhl55cy2wf8m89hfrg8gqw-findutils-4.6.0
macos-highsierra-test-login-interactive      /nix/store/hyrxf63yjfcay6q1wp3dfc5y4xvshlal-expand-response-params
macos-highsierra-test-login-interactive      /nix/store/i18ihnf3rxkj1xdch5qalbqbkl8hb6my-bootstrap-stage2-binutils-wrapper
macos-highsierra-test-login-interactive      /nix/store/ilj27ynsxq0b965qr1m976mz8h2sy1g6-patch-2.7.6
macos-highsierra-test-login-interactive      /nix/store/jsylgldy52pv6rs2y4l04qszbwxjfh8y-libiconv-osx-10.11.6
macos-highsierra-test-login-interactive      /nix/store/kdnhvzavikc62vf5c5hyz2233x4pa136-gnused-4.5
macos-highsierra-test-login-interactive      /nix/store/kh9sj73nfqfkb1kn6fvvbqnwm5prg698-xz-5.2.4-bin
macos-highsierra-test-login-interactive      /nix/store/kv402lpbn0xrb0pm7v9kpxjvgndy3fxv-ICU-osx-10.10.5
macos-highsierra-test-login-interactive      /nix/store/ky17cjlbna5xlpwfsfmj2cvflmwhy4na-expand-response-params
macos-highsierra-test-login-interactive      /nix/store/l7d4nmsp8dkxqc1vz01vnfbm60mqnb7k-libc++-5.0.2
macos-highsierra-test-login-interactive      /nix/store/la4az1fd63wq795jl6siyml0044pxry6-bash-interactive-4.4-p23-doc
macos-highsierra-test-login-interactive      /nix/store/n7bh0pnddnckh9zs14wfz7snl7gkggv4-bash-4.4-p23-info
macos-highsierra-test-login-interactive      /nix/store/nib1qjrhkz4bsfp11kjqlqf93544mi11-bash-4.4-p23-doc
macos-highsierra-test-login-interactive      /nix/store/nvb1kr6nsd1q1s0qjj6ld1n8rpg5lc1w-libc++abi-5.0.2
macos-highsierra-test-login-interactive      /nix/store/p0cdc7rzf1a69k013vnf4av7a6xcsngp-llvm-5.0.2-lib
macos-highsierra-test-login-interactive      /nix/store/psry9nab69pwi27izxgy41zh7pccniqx-zlib-1.2.11
macos-highsierra-test-login-interactive      /nix/store/pss843nbpn833hjsb6yxsyrrazn0spkd-gawk-4.2.1
macos-highsierra-test-login-interactive      /nix/store/qmfzx3979byqsqg9dlg9mj058ac3axjp-bash-4.4-p23-man
macos-highsierra-test-login-interactive      /nix/store/qmxyi0v65y3k8xf8wjcdx4gsk39gijfi-bash-interactive-4.4-p23-man
macos-highsierra-test-login-interactive      /nix/store/qxpvlfwz9qjlf5v9vb636ihlfrfq2lxx-gmp-6.1.2
macos-highsierra-test-login-interactive      /nix/store/r765bx4lndy8ymwlq0b098cbgycpska4-DarwinTools-1
macos-highsierra-test-login-interactive      /nix/store/r7v5bfdxgimakcxj26xij8vr0n4yh03b-stdenv-darwin
macos-highsierra-test-login-interactive      /nix/store/rm5hs2mg6rw6p1j2fsaiyx4jnspr3qxs-coreutils-8.29
macos-highsierra-test-login-interactive      /nix/store/rq25z24vqncw9m9kljag531lsgi4lcws-diffutils-3.6
macos-highsierra-test-login-interactive      /nix/store/vqy0pk0ckzynzjrymccyfpfcjmfnaw1r-bash-4.4-p23-dev
macos-highsierra-test-login-interactive      /nix/store/vsgzq5h8fsywjw95h64azqpw4q9cswc9-CF-osx-10.10.5
macos-highsierra-test-login-interactive      /nix/store/ylmiw5xyc9j87i6bdfcj06ay4z3apz3k-gnumake-4.2.1
macos-highsierra-test-login-interactive      /nix/store/z0x9h91vvbavfgn48ybaz0vi9sczxn2i-pcre-8.42
macos-highsierra-test-login-interactive      /nix/store/z4k8fk58pw5lpm1bib1ijk1mpji0v033-xz-5.2.4
macos-highsierra-test-login-interactive      /nix/store/zbhk0jhc9y8hmbcax9nvddbik3rgsary-bash-4.4-p23
macos-highsierra-test-login-interactive    copying path '/nix/store/nib1qjrhkz4bsfp11kjqlqf93544mi11-bash-4.4-p23-doc' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/n7bh0pnddnckh9zs14wfz7snl7gkggv4-bash-4.4-p23-info' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/qmfzx3979byqsqg9dlg9mj058ac3axjp-bash-4.4-p23-man' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/la4az1fd63wq795jl6siyml0044pxry6-bash-interactive-4.4-p23-doc' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/1vrn0x735avl7sq6mwf5h50slb4666j7-bash-interactive-4.4-p23-info' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/qmxyi0v65y3k8xf8wjcdx4gsk39gijfi-bash-interactive-4.4-p23-man' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/59rrgildqwf88nwrkf0xp3g1c46akf8k-Libsystem-osx-10.11.6' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/39mw7i8qjmvr94pqlx62znmkxw1ga17p-adv_cmds-osx-10.5.8-locale' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/2ws9cmamvr7xyvdg4d2nnd1bmr1zjrrq-bootstrap-tools' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/zbhk0jhc9y8hmbcax9nvddbik3rgsary-bash-4.4-p23' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/14k27li9psmi201brzm3yhilm7nq0cfc-bzip2-1.0.6.0.1' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/hyrxf63yjfcay6q1wp3dfc5y4xvshlal-expand-response-params' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/pss843nbpn833hjsb6yxsyrrazn0spkd-gawk-4.2.1' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/ylmiw5xyc9j87i6bdfcj06ay4z3apz3k-gnumake-4.2.1' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/kdnhvzavikc62vf5c5hyz2233x4pa136-gnused-4.5' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/bc6vywbmvvwpk1bfk0dgpw3i192phlp3-libc++abi-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/3whkmrfls5pwdi5yxz8qfp7clsl17j7l-libffi-3.2.1' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/jsylgldy52pv6rs2y4l04qszbwxjfh8y-libiconv-osx-10.11.6' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/cwgp49bjfc9hjmg63kcj3i2qyiqq1syl-ncurses-6.1' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/z0x9h91vvbavfgn48ybaz0vi9sczxn2i-pcre-8.42' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/z4k8fk58pw5lpm1bib1ijk1mpji0v033-xz-5.2.4' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/psry9nab69pwi27izxgy41zh7pccniqx-zlib-1.2.11' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/cwx4dshnbrjigh3g6zp1ln4wwdnm8agh-binutils-2.30' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/f0ymknfjldn3lsmxcm3wcrla2dp6bqiq-libc++-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/7hcnb7lk6q05zyq5g2x0yac89nk46yv8-bzip2-1.0.6.0.1-bin' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/agvf6aqhvqszyjn4adb47rx008c1039k-ed-1.14.2' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/d3w7zyl2wdbl4ajilypfmn454d29c4pn-gzip-1.9' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/kh9sj73nfqfkb1kn6fvvbqnwm5prg698-xz-5.2.4-bin' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/365x532d88lj3zyi84q1wmh00nlnr749-gnugrep-3.1' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/ilj27ynsxq0b965qr1m976mz8h2sy1g6-patch-2.7.6' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/kv402lpbn0xrb0pm7v9kpxjvgndy3fxv-ICU-osx-10.10.5' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/2kd8k0h7mkrwc444r9la48liyl2di3mx-cctools-port-895' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/04bnzqnqivgxrhly898ys6jhvb7r77z8-compiler-rt-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/9a762m9ld7f6z0x5d47lvnnw2nd0f2xw-gettext-0.19.8.1' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/qxpvlfwz9qjlf5v9vb636ihlfrfq2lxx-gmp-6.1.2' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/2571v4g663w2490rzm1qi4qrzj1qijw5-clang-5.0.2-lib' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/p0cdc7rzf1a69k013vnf4av7a6xcsngp-llvm-5.0.2-lib' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/rm5hs2mg6rw6p1j2fsaiyx4jnspr3qxs-coreutils-8.29' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/6jmyb8qzjr77pnpflz3k95zyfhxd6x11-compiler-rt-5.0.2-dev' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/rq25z24vqncw9m9kljag531lsgi4lcws-diffutils-3.6' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/gvxxgcbrxrvhl55cy2wf8m89hfrg8gqw-findutils-4.6.0' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/vsgzq5h8fsywjw95h64azqpw4q9cswc9-CF-osx-10.10.5' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/7vsmbgsp21kl7mvyp305ac13qzsh5bmk-gnutar-1.30' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/r765bx4lndy8ymwlq0b098cbgycpska4-DarwinTools-1' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/c8zq9hdriqbm6cxlcdwkpqc3ivdbifz4-readline-7.0p5' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/g309ikgbr76zzn4809swx0j89qqlqygz-nix-info' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/5im29qx9rni3w8l3j8i2yr22sin55kxv-cctools-binutils-darwin' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/fsdil6i3g3lfpgmdvb22gbf9fm3pjr35-cctools-binutils-darwin-wrapper' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/19xwrnwwdhx278wd2hzf0f4fhd619fqv-clang-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/ky17cjlbna5xlpwfsfmj2cvflmwhy4na-expand-response-params' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/nvb1kr6nsd1q1s0qjj6ld1n8rpg5lc1w-libc++abi-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/i18ihnf3rxkj1xdch5qalbqbkl8hb6my-bootstrap-stage2-binutils-wrapper' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/l7d4nmsp8dkxqc1vz01vnfbm60mqnb7k-libc++-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/0h6cl7wfja45d46gid9fyrpwf1xy2jns-bootstrap-stage2-clang-wrapper' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/vqy0pk0ckzynzjrymccyfpfcjmfnaw1r-bash-4.4-p23-dev' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/7qw2hb02ychpaabvxs2yq16p1cc0i1jc-clang-wrapper-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/8jwl96k4va9bvcl8ds2rgjpq2073gbij-bash-interactive-4.4-p23' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/r7v5bfdxgimakcxj26xij8vr0n4yh03b-stdenv-darwin' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    copying path '/nix/store/fjilysyz08s9vl1bdcf3vndndd4xfacj-bash-interactive-4.4-p23-dev' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive    Starting: testexitok
macos-highsierra-test-login-interactive         ./testscript::runtest::43 testexitok
macos-highsierra-test-login-interactive         ./testscript::testexitok::8 /bin/bash -c 'exit 0'
macos-highsierra-test-login-interactive    Finishing: testexitok, duration:0 result:0
macos-highsierra-test-login-interactive    Starting: testexitfail
macos-highsierra-test-login-interactive         ./testscript::runtest::43 testexitfail
macos-highsierra-test-login-interactive         ./testscript::testexitfail::12 /bin/bash -c 'exit 1'
macos-highsierra-test-login-interactive    Finishing: testexitfail, duration:0 result:1
macos-highsierra-test-login-interactive    Starting: testshell
macos-highsierra-test-login-interactive         ./testscript::runtest::43 testshell
macos-highsierra-test-login-interactive         ./testscript::testshell::16 nix-shell -p hello --run hello
macos-highsierra-test-login-interactive        these paths will be fetched (0.02 MiB download, 0.07 MiB unpacked):
macos-highsierra-test-login-interactive          /nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10
macos-highsierra-test-login-interactive        copying path '/nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive        Hello, world!
macos-highsierra-test-login-interactive    Finishing: testshell, duration:3 result:0
macos-highsierra-test-login-interactive    Starting: testnixenv
macos-highsierra-test-login-interactive         ./testscript::runtest::43 testnixenv
macos-highsierra-test-login-interactive         ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
macos-highsierra-test-login-interactive        installing 'hello-2.10'
macos-highsierra-test-login-interactive        building '/nix/store/l0hp7hmcppm59dw0klxnvyybgdi2xl50-user-environment.drv'...
macos-highsierra-test-login-interactive        created 2 symlinks in user environment
macos-highsierra-test-login-interactive         ./testscript::testnixenv::21 hello
macos-highsierra-test-login-interactive        Hello, world!
macos-highsierra-test-login-interactive         ./testscript::testnixenv::22 nix-env --uninstall 'hello.*'
macos-highsierra-test-login-interactive        uninstalling 'hello-2.10'
macos-highsierra-test-login-interactive        building '/nix/store/xsk9wjy0dpp7w7d3r3bkzxzaklqdzq6q-user-environment.drv'...
macos-highsierra-test-login-interactive        created 0 symlinks in user environment
macos-highsierra-test-login-interactive    Finishing: testnixenv, duration:1 result:0
macos-highsierra-test-login-interactive    Starting: testnixchannel
macos-highsierra-test-login-interactive         ./testscript::runtest::43 testnixchannel
macos-highsierra-test-login-interactive         ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
macos-highsierra-test-login-interactive         ./testscript::testnixchannel::27 nix-channel --update
macos-highsierra-test-login-interactive        unpacking channels...
macos-highsierra-test-login-interactive        created 2 symlinks in user environment
macos-highsierra-test-login-interactive         ./testscript::testnixchannel::28 nix-env -iA nixos-18-03.hello
macos-highsierra-test-login-interactive        installing 'hello-2.10'
macos-highsierra-test-login-interactive        these paths will be fetched (8.97 MiB download, 47.60 MiB unpacked):
macos-highsierra-test-login-interactive          /nix/store/cr3s0wfg4b0vpqf4avxbs2cjyh8ik8x5-hello-2.10
macos-highsierra-test-login-interactive          /nix/store/gagv3nkbppdjb78csszx77agzdzlpg46-libc++-5.0.2
macos-highsierra-test-login-interactive          /nix/store/madyr371ywi25cyd0ac6l4jgbpfks0l2-ICU-osx-10.10.5
macos-highsierra-test-login-interactive          /nix/store/n424yw4ws0hmaps1gh26g4hdibfimc8k-libc++abi-5.0.2
macos-highsierra-test-login-interactive          /nix/store/yvkvyvc36l2dmwl22vajc8bdg7fv3p6b-Libsystem-osx-10.11.6
macos-highsierra-test-login-interactive          /nix/store/z9lvlxdmlbwg00j2drhwm8b6f8j4xqx5-CF-osx-10.10.5
macos-highsierra-test-login-interactive        copying path '/nix/store/yvkvyvc36l2dmwl22vajc8bdg7fv3p6b-Libsystem-osx-10.11.6' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive        copying path '/nix/store/n424yw4ws0hmaps1gh26g4hdibfimc8k-libc++abi-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive        copying path '/nix/store/gagv3nkbppdjb78csszx77agzdzlpg46-libc++-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive        copying path '/nix/store/madyr371ywi25cyd0ac6l4jgbpfks0l2-ICU-osx-10.10.5' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive        copying path '/nix/store/z9lvlxdmlbwg00j2drhwm8b6f8j4xqx5-CF-osx-10.10.5' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive        copying path '/nix/store/cr3s0wfg4b0vpqf4avxbs2cjyh8ik8x5-hello-2.10' from 'https://cache.nixos.org'...
macos-highsierra-test-login-interactive        building '/nix/store/796cy480iaqz51d3bmwsdw478zg4rfg9-user-environment.drv'...
macos-highsierra-test-login-interactive        created 2 symlinks in user environment
macos-highsierra-test-login-interactive         ./testscript::testnixchannel::29 hello
macos-highsierra-test-login-interactive        Hello, world!
macos-highsierra-test-login-interactive         ./testscript::testnixchannel::30 nix-env --uninstall 'hello.*'
macos-highsierra-test-login-interactive        uninstalling 'hello-2.10'
macos-highsierra-test-login-interactive    Finishing: testnixchannel, duration:33 result:0
macos-highsierra-test-interactive    ./testscript: line 60: nix-shell: command not found
macos-highsierra-test-interactive    Starting: testexitok
macos-highsierra-test-interactive         ./testscript::runtest::43 testexitok
macos-highsierra-test-interactive         ./testscript::testexitok::8 /bin/bash -c 'exit 0'
macos-highsierra-test-interactive    Finishing: testexitok, duration:0 result:0
macos-highsierra-test-interactive    Starting: testexitfail
macos-highsierra-test-interactive         ./testscript::runtest::43 testexitfail
macos-highsierra-test-interactive         ./testscript::testexitfail::12 /bin/bash -c 'exit 1'
macos-highsierra-test-interactive    Finishing: testexitfail, duration:0 result:1
macos-highsierra-test-interactive    Starting: testshell
macos-highsierra-test-interactive         ./testscript::runtest::43 testshell
macos-highsierra-test-interactive         ./testscript::testshell::16 nix-shell -p hello --run hello
macos-highsierra-test-interactive        ./testscript: line 16: nix-shell: command not found
macos-highsierra-test-interactive    Finishing: testshell, duration:0 result:127
macos-highsierra-test-interactive    Starting: testnixenv
macos-highsierra-test-interactive         ./testscript::runtest::43 testnixenv
macos-highsierra-test-interactive         ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
macos-highsierra-test-interactive        ./testscript: line 20: nix-env: command not found
macos-highsierra-test-interactive    Finishing: testnixenv, duration:0 result:127
macos-highsierra-test-interactive    Starting: testnixchannel
macos-highsierra-test-interactive         ./testscript::runtest::43 testnixchannel
macos-highsierra-test-interactive         ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
macos-highsierra-test-interactive        ./testscript: line 26: nix-channel: command not found
macos-highsierra-test-interactive    Finishing: testnixchannel, duration:0 result:127
macos-highsierra-test-ssh    ./testscript: line 60: nix-shell: command not found
macos-highsierra-test-ssh    Starting: testexitok
macos-highsierra-test-ssh         ./testscript::runtest::43 testexitok
macos-highsierra-test-ssh         ./testscript::testexitok::8 /bin/bash -c 'exit 0'
macos-highsierra-test-ssh    Finishing: testexitok, duration:0 result:0
macos-highsierra-test-ssh    Starting: testexitfail
macos-highsierra-test-ssh         ./testscript::runtest::43 testexitfail
macos-highsierra-test-ssh         ./testscript::testexitfail::12 /bin/bash -c 'exit 1'
macos-highsierra-test-ssh    Finishing: testexitfail, duration:0 result:1
macos-highsierra-test-ssh    Starting: testshell
macos-highsierra-test-ssh         ./testscript::runtest::43 testshell
macos-highsierra-test-ssh         ./testscript::testshell::16 nix-shell -p hello --run hello
macos-highsierra-test-ssh        ./testscript: line 16: nix-shell: command not found
macos-highsierra-test-ssh    Finishing: testshell, duration:0 result:127
macos-highsierra-test-ssh    Starting: testnixenv
macos-highsierra-test-ssh         ./testscript::runtest::43 testnixenv
macos-highsierra-test-ssh         ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
macos-highsierra-test-ssh        ./testscript: line 20: nix-env: command not found
macos-highsierra-test-ssh    Finishing: testnixenv, duration:0 result:127
macos-highsierra-test-ssh    Starting: testnixchannel
macos-highsierra-test-ssh         ./testscript::runtest::43 testnixchannel
macos-highsierra-test-ssh         ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
macos-highsierra-test-ssh        ./testscript: line 26: nix-channel: command not found
macos-highsierra-test-ssh    Finishing: testnixchannel, duration:0 result:127
</pre>
<h2 id="detail-install-default-macos-highsierra-install-method">install-default-macos-highsierra-install-method</h1><pre>install-default
</pre>
<h2 id="detail-install-default-macos-highsierra-Vagrantfile">install-default-macos-highsierra-Vagrantfile</h1><pre>Vagrant.configure("2") do |config|
  config.vm.box = "monsenso/macos-10.13"
  config.vm.provision "shell", inline: <<-SHELL

  SHELL
  config.vm.provision "shell", privileged: false, inline: <<-SHELL

echo 'No preInstallUnprivileged rules.'
  SHELL
  config.vm.synced_folder ".", "/vagrant", disabled: true
  config.vm.provider "virtualbox" do |vb|
    vb.memory = "2048"

    # for macos:
    vb.customize ["modifyvm", :id, "--usb", "off"]
    vb.customize ["modifyvm", :id, "--usbehci", "off"]
  end
end
</pre>
<h2 id="detail-install-default-macos-highsierra-image-name">install-default-macos-highsierra-image-name</h1><pre>macos-highsierra
</pre>
<h2 id="detail-install-default-macos-highsierra-upgrade-simulation-Vagrantfile">install-default-macos-highsierra-upgrade-simulation-Vagrantfile</h1><pre>Vagrant.configure("2") do |config|
  config.vm.box = "monsenso/macos-10.13"
  config.vm.provision "shell", inline: <<-SHELL
echo 'No preInstall rules.'
  SHELL
  config.vm.provision "shell", privileged: false, inline: <<-SHELL


        curl custom-install-thing | bash
        sudo cp /etc/bashrc /etc/bashrc~previous
        sudo cp /etc/bashrc.backup-before-nix /etc/bashrc

      
  SHELL
  config.vm.synced_folder ".", "/vagrant", disabled: true
  config.vm.provider "virtualbox" do |vb|
    vb.memory = "2048"

    # for macos:
    vb.customize ["modifyvm", :id, "--usb", "off"]
    vb.customize ["modifyvm", :id, "--usbehci", "off"]
  end
end
</pre>
<h2 id="detail-install-default-macos-highsierra-upgrade-simulation-image-name">install-default-macos-highsierra-upgrade-simulation-image-name</h1><pre>macos-highsierra-upgrade-simulation
</pre>
<h2 id="detail-install-default-macos-highsierra-upgrade-simulation-install-method">install-default-macos-highsierra-upgrade-simulation-install-method</h1><pre>install-default
</pre>
<h2 id="detail-install-default-macos-highsierra-upgrade-simulation-run-log">install-default-macos-highsierra-upgrade-simulation-run-log</h1><pre>Bringing machine 'default' up with 'virtualbox' provider...
==> default: Importing base box 'monsenso/macos-10.13'...
[KProgress: 10%[KProgress: 20%[KProgress: 30%[KProgress: 40%[KProgress: 50%[KProgress: 60%[KProgress: 70%[KProgress: 80%[KProgress: 90%[K==> default: Matching MAC address for NAT networking...
==> default: Checking if box 'monsenso/macos-10.13' is up to date...
==> default: Setting the name of the VM: tmp7zBLIuLajR_default_1535034520465_3208
==> default: Clearing any previously set network interfaces...
==> default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==> default: Forwarding ports...
    default: 22 (guest) => 2222 (host) (adapter 1)
==> default: Running 'pre-boot' VM customizations...
==> default: Booting VM...
==> default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: 
    default: Vagrant insecure key detected. Vagrant will automatically replace
    default: this with a newly generated keypair for better security.
    default: 
    default: Inserting generated public key within guest...
    default: Removing insecure key from the guest if it's present...
    default: Key inserted! Disconnecting and reconnecting using new SSH key...
==> default: Machine booted and ready!
==> default: Checking for guest additions in VM...
    default: No guest additions were detected on the base box for this VM! Guest
    default: additions are required for forwarded ports, shared folders, host only
    default: networking, and more. If SSH fails on this machine, please install
    default: the guest additions and repackage the box to continue.
    default: 
    default: This is not an error message; everything may continue to work properly,
    default: in which case you may ignore this message.
==> default: Running provisioner: shell...
    default: Running: inline script
    default: No preInstall rules.
==> default: Running provisioner: shell...
    default: Running: inline script
    default:   % Total    % Received % Xferd  Ave
    default: rage Speed   
    default: Time    Time 
    default:     Time  Current
    default:             
    default:                      Dload  Upload  
    default:  Tota
    default: l   Spent    Lef
    default: t  Speed
    default:   0     0    0    
    default:  0
    default:     0     0
    default:    
    default:    0  
    default:     0 --:
    default: -
    default: -:-- 
    default: --:
    default: --:-- --:--:--     0
    default:   0    
    default:  0   
    default:  0     0    0     0    
    default:   0    
    default:  
    default:  0 --:--:-
    default: - --:--:-- --:--:--     0
    default:  45  408k   45  184k    0     0   164k      0  0:00:02  0:00:01  0:00:01  164k
    default:  78  408k   78  321k    0     0   151k      0  0:00:02  0:00:02 --:--:--  151k
    default: 100  408k  100  408k    0     0   153k      0  0:00:02  0:00:02 --:--:--  153k
    default: Welcome to the foobar nix upstaller (updater/installer)!
    default: We're going to make it so your system is running the right version of Nix with the right foobar-specific configuration!
    default: First, we're going to do some first-pass validation to make sure we know how to work with your system.
    default: Checking for curl...
    default: OK
    default: Checking for sudo...
    default: OK
    default: Checking for connectivity to foobar binrepo...
    default: OK
    default: OK, initial checks look good.
    default: Now we need to check if you have Nix installed, and get it if not.
    default: You don't have Nix installed yet, let's fix that.
    default: Checking for connectivity to the NixOS.org binary cache...
    default: OK, downloading and running the upstream installer.
    default: downloading Nix 2.0.3 binary tarball for x86_64-darwin from 'https://nixos.org/releases/nix/nix-2.0.3/nix-2.0.3-x86_64-darwin.tar.bz2' to '/var/folders/k6/wch_wxzx43z04wmzdf61znqr0000gn/T/nix-binary-tarball-unpack.XXXXXXXXXX.A1KoFrPc'...
    default:   % Total    % Received % Xferd
    default:   Avera
    default: ge Speed   Time    
    default: T
    default: ime     Time  Current
    default:           
    default:        
    default:       
    default:    
    default:        Dload  Upload   Total   Spen
    default: t    Left  Speed
    default:   0 
    default:     0    0     0 
    default:    0
    default:      0    
    default:   0      0 --:--:-- --:--:-- --:--
    default: :--     0
    default:   0     0
    default:     0  
    default:    0    0    
    default:  
    default: 0     
    default:  0    
    default:   0 --:--:-- --:--:-
    default: - --:--:--     0
    default:   0 25.3M    0  1
    default: 92k    
    default: 0     0   17
    default: 6k      0  0:02:26  0:00
    default: :01  0:02:25  1
    default: 76k
    default:   4 25.3M 
    default:    4 1280k    0     0   602k      0  0:00:4
    default: 3  0:00:02
    default:   0:00:41  602k
    default:   9 25.3M    9 236
    default: 8k    0
    default:      0   768
    default: k  
    default:     0  0:00:33 
    default:  0:0
    default: 0:03  0:00:30  768k
    default:  14 25.3M   14 3632k    0 
    default:     0  
    default:  885k      
    default: 0  0:00:2
    default: 9  0:00:04  0:00:25 
    default:  885k
    default:  19 25.3M   19 4
    default: 976k   
    default:  0   
    default:   0   9
    default: 76k   
    default:    0
    default:   0:00:26  0
    default: :00:
    default: 05  0:00:21 
    default: 1004k
    default:  24 25.3M   24 6320k   
    default:  0     
    default: 0  103
    default: 9k     
    default:  0  0:00:24  0:0
    default: 0:06  0:00:18 1226k
    default:  27 25.3M  
    default:  27 
    default: 7136k   
    default:  0 
    default:     0  1006k      0 
    default:  0:00:25  0:00:07  0:00:18 1180k
    default:  30
    default:  25.3M   30 8000k   
    default:  0     0   
    default: 989k    
    default:   0  0:00:26  0:00:08  0:00:18 1126k
    default:  34 25.3M   34 8976k  
    default:   0    
    default:  0  
    default:  
    default: 985
    default: k      0  0:00:26  
    default: 0
    default: :00:
    default: 09  0:00:17 1067k
    default:  
    default: 3
    default: 8 
    default: 25.3M  
    default:  38  
    default: 9.8M    0  
    default:    0  
    default:  998k      0 
    default:  0:00:25  0:00:10  0:00:15 1020
    default: k
    default:  43 25.3M   43 11.
    default: 0M    0
    default:      
    default: 0  1018k      0
    default:   0:00
    default: :2
    default: 5  0:00:1
    default: 1  0:
    default: 00:14  993k
    default:  48 
    default: 25.3M 
    default:   48 12.3M   
    default:  
    default: 0
    default:      0  1042k      0  0:00:24  0
    default: :0
    default: 0
    default: :12  0:00:12 109
    default: 3k
    default:  54 25.3M   
    default: 54 13.7M    0    
    default:  0 
    default:  10
    default: 70k      0
    default:   0:00:24  0:00
    default: :13  0:00:1
    default: 1 1201k
    default:  59 25.3M   59 15.1M    0     0  1099k      0  0:00:23  0:00:14  0:00:09 1307k
    default:  
    default: 6
    default: 6 25.3
    default: M   66 16.
    default: 7M  
    default:   
    default: 0    
    default:  0  1135k  
    default:     0  
    default: 0:00:2
    default: 2  0:00:1
    default: 5  0
    default: :00:07 141
    default: 6k
    default:  72 25.3M   
    default: 72 18.4
    default: M    0    
    default:  0  1171k     
    default:  0  0:
    default: 00:22 
    default:  
    default: 0:00:1
    default: 6  0:00:06
    default:  151
    default: 4
    default: k
    default:  79 25.3M   79 20.1M    0     0  1208k      0  0:00:21  0:00:17  0:00:04 1609k
    default:  87
    default:  25.3M
    default:    8
    default: 7 
    default: 22.0M 
    default:    0
    default:  
    default:    
    default:  
    default: 0  
    default: 1247
    default: k 
    default:    
    default:   0 
    default:  0:00:20  
    default: 0:0
    default: 0:18 
    default:  0:0
    default: 0
    default: :02 1712k
    default:  95 25.3M   95
    default:  24.0M
    default:     
    default: 0     0  1291k
    default:       0  
    default: 0:00:20
    default:   0:
    default: 00:19
    default:   0:00:01 18
    default: 32k
    default: 100 25.3M  100 25.3M    0     0  1316k      0  0:00:19  0:00:
    default: 19 --:
    default: --:-- 1907k
    default: [1;31mSwitching to the Daemon-based Installer[0m
    default: [38;32mWelcome to the Multi-User Nix Installation
    default: [0m
    default: 
    default: This installation tool will set up your computer with the Nix package
    default: manager. This will happen in a few stages:
    default: 
    default: 1. Make sure your computer doesn't already have Nix. If it does, I
    default:    will show you instructions on how to clean up your old one.
    default: 
    default: 2. Show you what we are going to install and where. Then we will ask
    default:    if you are ready to continue.
    default: 
    default: 3. Create the system users and groups that the Nix daemon uses to run
    default:    builds.
    default: 
    default: 4. Perform the basic installation of the Nix files daemon.
    default: 
    default: 5. Configure your shell to import special Nix Profile files, so you
    default:    can use Nix.
    default: 
    default: 6. Start the Nix daemon.
    default: [38;32m[38;4;32mWould you like to see a more detailed list of what we will do?
    default: [0m
    default: No TTY, assuming you would say yes :)
    default: 
    default: We will:
    default: 
    default:  - make sure your computer doesn't already have Nix files
    default:    (if it does, I  will tell you how to clean them up.)
    default:  - create local users (see the list above for the users we'll make)
    default:  - create a local group (nixbld)
    default:  - install Nix in to /nix
    default:  - create a configuration file in /etc/nix
    default:  - set up the "default profile" by creating some Nix-related files in
    default:    /var/root
    default:  - back up /etc/bashrc to /etc/bashrc.backup-before-nix
    default:  - update /etc/bashrc to include some Nix configuration
    default:  - back up /etc/zshrc to /etc/zshrc.backup-before-nix
    default:  - update /etc/zshrc to include some Nix configuration
    default:  - load and start a LaunchDaemon (at /Library/LaunchDaemons/org.nixos.nix-daemon.plist) for nix-daemon
    default: [38;32m[38;4;32mReady to continue?
    default: [0m
    default: No TTY, assuming you would say yes :)
    default: 
    default: [38;34m
    default: ---- let's talk about sudo -----------------------------------------------------
    default: [0m
    default: This script is going to call sudo a lot. Normally, it would show you
    default: exactly what commands it is running and why. However, the script is
    default: run in a headless fashion, like this:
    default: 
    default:   $ curl https://nixos.org/nix/install | sh
    default: 
    default: or maybe in a CI pipeline. Because of that, we're going to skip the
    default: verbose output in the interest of brevity.
    default: 
    default: If you would like to
    default: see the output, try like this:
    default: 
    default:   $ curl -o install-nix https://nixos.org/nix/install
    default:   $ sh ./install-nix
    default: 
    default: [38;34m---- Nix config report ---------------------------------------------------------
    default: [0m[38;1m        Temp Dir[0m:	/var/folders/k6/wch_wxzx43z04wmzdf61znqr0000gn/T/tmp.XXXXXXXXXX.WuTA5Ddz
    default: [38;1m        Nix Root[0m:	/nix
    default: [38;1m     Build Users[0m:	32
    default: [38;1m  Build Group ID[0m:	30000
    default: [38;1mBuild Group Name[0m:	nixbld
    default: 
    default: [38;4;34m
    default: build users:
    default: [0m
    default: [38;1m    Username[0m:	UID
    default: [38;1m     nixbld1[0m:	30001
    default: [38;1m     nixbld2[0m:	30002
    default: [38;1m     nixbld3[0m:	30003
    default: [38;1m     nixbld4[0m:	30004
    default: [38;1m     nixbld5[0m:	30005
    default: [38;1m     nixbld6[0m:	30006
    default: [38;1m     nixbld7[0m:	30007
    default: [38;1m     nixbld8[0m:	30008
    default: [38;1m     nixbld9[0m:	30009
    default: [38;1m     nixbld10[0m:	30010
    default: [38;1m     nixbld11[0m:	30011
    default: [38;1m     nixbld12[0m:	30012
    default: [38;1m     nixbld13[0m:	30013
    default: [38;1m     nixbld14[0m:	30014
    default: [38;1m     nixbld15[0m:	30015
    default: [38;1m     nixbld16[0m:	30016
    default: [38;1m     nixbld17[0m:	30017
    default: [38;1m     nixbld18[0m:	30018
    default: [38;1m     nixbld19[0m:	30019
    default: [38;1m     nixbld20[0m:	30020
    default: [38;1m     nixbld21[0m:	30021
    default: [38;1m     nixbld22[0m:	30022
    default: [38;1m     nixbld23[0m:	30023
    default: [38;1m     nixbld24[0m:	30024
    default: [38;1m     nixbld25[0m:	30025
    default: [38;1m     nixbld26[0m:	30026
    default: [38;1m     nixbld27[0m:	30027
    default: [38;1m     nixbld28[0m:	30028
    default: [38;1m     nixbld29[0m:	30029
    default: [38;1m     nixbld30[0m:	30030
    default: [38;1m     nixbld31[0m:	30031
    default: [38;1m     nixbld32[0m:	30032
    default: [38;32m[38;4;32mReady to continue?
    default: [0mNo TTY, assuming you would say yes :)
    default: 
    default: [38;32m
    default: ~~> Setting up the build group nixbld
    default: [0m
    default: [38;1m            Created[0m:	Yes
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld1
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 1
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: [38;32m
    default: ~~> Setting up the build user nixbld2
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 2
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld3
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 3
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld4
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 4
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld5
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 5
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld6
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 6
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld7
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 7
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld8
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 8
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld9
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 9
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld10
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 10
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld11
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 11
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld12
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 12
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld13
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 13
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld14
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 14
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld15
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 15
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld16
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 16
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld17
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 17
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld18
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 18
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld19
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 19
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld20
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 20
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld21
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 21
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld22
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 22
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld23
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 23
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld24
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 24
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld25
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 25
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld26
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 26
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld27
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 27
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld28
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 28
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld29
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 29
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld30
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 30
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m~~> Setting up the build user nixbld31
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 31
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default: 
    default: [38;32m
    default: ~~> Setting up the build user nixbld32
    default: [0m
    default: [38;1m           Created[0m:	Yes
    default: [38;1m            Hidden[0m:	Yes
    default: [38;1m    Home Directory[0m:	/var/empty
    default: [38;1m              Note[0m:	Nix build user 32
    default: [38;1m   Logins Disabled[0m:	Yes
    default: [38;1m  Member of nixbld[0m:	Yes
    default: [38;1m    PrimaryGroupID[0m:	30000
    default:       Alright! We have our first nix at /nix/store/2jp9d9qns3372hkx4k523hc1bbzkr4yp-nix-2.0.3
    default:       Just finished getting the nix database ready.
    default: 
    default: # Nix
    default: if [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then
    default:   . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'
    default: fi
    default: # End Nix
    default: 
    default: # Nix
    default: if [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then
    default:   . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'
    default: fi
    default: # End Nix
    default: installing 'nix-2.0.3'
    default: building '/nix/store/jp5371ld47218v5bzc6m5584l8b8w2n1-user-environment.drv'...
    default: created 7 symlinks in user environment
    default: unpacking channels...
    default: created 2 symlinks in user environment
    default: [38;32mAlright! We're done!
    default: [0m
    default: 
    default: Before Nix will work in your existing shells, you'll need to close
    default: them and open them again. Other than that, you should be ready to go.
    default: 
    default: Try it! Open a new terminal, and type:
    default: 
    default:   $ nix-shell -p nix-info --run "nix-info -m"
    default: 
    default: Thank you for using this installer. If you have any feedback, don't
    default: hesitate:
    default: 
    default: We'd love to help if you need it.
    default: 
    default: If you can, open an issue at https://github.com/nixos/nix/issues
    default: 
    default: Or feel free to contact the team,
    default:  - on IRC #nixos on irc.freenode.net
    default:  - on twitter @nixos_org
    default: OK, Nix is installed.
    default: Now we're going to hand-off control to the real upstaller, fetched from artifactory.
    default: Determining the required path from Artifactory...
    default: OK, pulling /nix/store/cb1av2jhzbhrvbcx4jafsrcpxszn531p-real-upstaller from Artifactory...
    default: We're going to need to run under sudo for this part so we can fetch paths from the foobar binary cache even if it hasn't been configured system-wide yet.
    default: OK, handing off to the real upstaller.
    default: Updating Nix, foobar nix.conf, and the upstaller script for your system profile.
    default: We're going to need to run under sudo for this part.
    default: replacing old 'nix-2.0.3'
    default: installing 'nix-2.0pre6137_e3cdcf89'
    default: installing 'foobar-nix-config'
    default: installing 'foobar-nix-upstaller'
    default: installing 'foobar-ca-bundle'
    default: installing 'linuxkit-builder'
    default: building '/nix/store/slqwb9zapl6jm2i9qyccx5x5l5vxjzk7-user-environment.drv'...
    default: created 23 symlinks in user environment
    default: Updating system channels
    default: unpacking channels...
    default: created 2 symlinks in user environment
    default: Restarting your system-wide nix-daemon process (will require sudo)
    default: Installation successful!
    default: Since this is your first time installing Nix, you may need to reopen your terminal or exit your session to get your environment set up right.
    default: To test, see if running 'nix --version' succeeds.
#!/bin/sh

set -eux

curl custom-install-thing | bash
#!/usr/bin/env bash

export PS4=' ''${BASH_SOURCE}::''${FUNCNAME[0]}::$LINENO '
set -u
set -o pipefail

testexitok() (
    /bin/bash -c "exit 0"
)

testexitfail() (
    /bin/bash -c "exit 1"
)

testshell() (
  nix-shell -p hello --run hello
)

testnixenv() (
  nix-env -iA nixpkgs.hello
  hello
  nix-env --uninstall 'hello.*'
)

testnixchannel() (
  nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
  nix-channel --update
  nix-env -iA nixos-18-03.hello
  hello
  nix-env --uninstall 'hello.*'
)

runtest() {
    testFn=$1

    local testdir="$TESTDIR/tests/$testFn"
    mkdir -p "$testdir"

    start=$(date '+%s')
    echo "Starting: $testFn"
    (
        set -ex
        "$testFn"
    ) 2>&1 | tee "$testdir/log" | sed 's/^/    /'
    exitcode=$?
    end=$(date '+%s')
    duration=$((end - start))
    echo "$exitcode" > "$testdir/exitcode"
    echo "$duration" > "$testdir/duration"

    echo "Finishing: $testFn, duration:$duration result:$exitcode"
}

main() {
    readonly TESTDIR=./nix-test-matrix-log
    rm -rf "$TESTDIR"
    mkdir "$TESTDIR"

    uname -a > "$TESTDIR/uname"
    nix-shell -p nix-info --run "nix-info -m" > "$TESTDIR/nix-info"
    (
        runtest testexitok
        runtest testexitfail
        runtest testshell
        runtest testnixenv
        runtest testnixchannel
    )

    tar -cf ./nix-test-matrix-log.tar "$TESTDIR"
}

main
macos-highsierra-upgrade-simulation-install    + curl custom-install-thing
macos-highsierra-upgrade-simulation-install    + bash
macos-highsierra-upgrade-simulation-install      % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
macos-highsierra-upgrade-simulation-install                                     Dload  Upload   Total   Spent    Left  Speed
macos-highsierra-upgrade-simulation-install      0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0 39  408k   39  159k    0     0   160k      0  0:00:02 --:--:--  0:00:02  159k 86  408k   86  351k    0     0   171k      0  0:00:02  0:00:02 --:--:--  171k100  408k  100  408k    0     0   166k      0  0:00:02  0:00:02 --:--:--  166k
macos-highsierra-upgrade-simulation-install    Welcome to the foobar nix upstaller (updater/installer)!
macos-highsierra-upgrade-simulation-install    We're going to make it so your system is running the right version of Nix with the right foobar-specific configuration!
macos-highsierra-upgrade-simulation-install    First, we're going to do some first-pass validation to make sure we know how to work with your system.
macos-highsierra-upgrade-simulation-install    Checking for curl...
macos-highsierra-upgrade-simulation-install    OK
macos-highsierra-upgrade-simulation-install    Checking for sudo...
macos-highsierra-upgrade-simulation-install    OK
macos-highsierra-upgrade-simulation-install    Checking for connectivity to foobar binrepo...
macos-highsierra-upgrade-simulation-install    OK
macos-highsierra-upgrade-simulation-install    OK, initial checks look good.
macos-highsierra-upgrade-simulation-install    Attempting to fix it by adding the profile loader back to /etc/bashrc
macos-highsierra-upgrade-simulation-install    It appears a macOS upgrade has broken the Nix installation.
macos-highsierra-upgrade-simulation-install    The Nix profile loader we added back to /etc/bashrc didn't fix the problem.
macos-highsierra-upgrade-simulation-install    Please contact @nix-help in #nix-users on Slack!
macos-highsierra-upgrade-simulation-test-login    ./testscript: line 60: nix-shell: command not found
macos-highsierra-upgrade-simulation-test-login    Starting: testexitok
macos-highsierra-upgrade-simulation-test-login         ./testscript::runtest::43 testexitok
macos-highsierra-upgrade-simulation-test-login         ./testscript::testexitok::8 /bin/bash -c 'exit 0'
macos-highsierra-upgrade-simulation-test-login    Finishing: testexitok, duration:0 result:0
macos-highsierra-upgrade-simulation-test-login    Starting: testexitfail
macos-highsierra-upgrade-simulation-test-login         ./testscript::runtest::43 testexitfail
macos-highsierra-upgrade-simulation-test-login         ./testscript::testexitfail::12 /bin/bash -c 'exit 1'
macos-highsierra-upgrade-simulation-test-login    Finishing: testexitfail, duration:0 result:1
macos-highsierra-upgrade-simulation-test-login    Starting: testshell
macos-highsierra-upgrade-simulation-test-login         ./testscript::runtest::43 testshell
macos-highsierra-upgrade-simulation-test-login         ./testscript::testshell::16 nix-shell -p hello --run hello
macos-highsierra-upgrade-simulation-test-login        ./testscript: line 16: nix-shell: command not found
macos-highsierra-upgrade-simulation-test-login    Finishing: testshell, duration:0 result:127
macos-highsierra-upgrade-simulation-test-login    Starting: testnixenv
macos-highsierra-upgrade-simulation-test-login         ./testscript::runtest::43 testnixenv
macos-highsierra-upgrade-simulation-test-login         ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
macos-highsierra-upgrade-simulation-test-login        ./testscript: line 20: nix-env: command not found
macos-highsierra-upgrade-simulation-test-login    Finishing: testnixenv, duration:0 result:127
macos-highsierra-upgrade-simulation-test-login    Starting: testnixchannel
macos-highsierra-upgrade-simulation-test-login         ./testscript::runtest::43 testnixchannel
macos-highsierra-upgrade-simulation-test-login         ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
macos-highsierra-upgrade-simulation-test-login        ./testscript: line 26: nix-channel: command not found
macos-highsierra-upgrade-simulation-test-login    Finishing: testnixchannel, duration:0 result:127
macos-highsierra-upgrade-simulation-test-login-interactive    these paths will be fetched (155.11 MiB download, 818.36 MiB unpacked):
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/04bnzqnqivgxrhly898ys6jhvb7r77z8-compiler-rt-5.0.2
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/0h6cl7wfja45d46gid9fyrpwf1xy2jns-bootstrap-stage2-clang-wrapper
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/14k27li9psmi201brzm3yhilm7nq0cfc-bzip2-1.0.6.0.1
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/19xwrnwwdhx278wd2hzf0f4fhd619fqv-clang-5.0.2
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/1vrn0x735avl7sq6mwf5h50slb4666j7-bash-interactive-4.4-p23-info
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/2571v4g663w2490rzm1qi4qrzj1qijw5-clang-5.0.2-lib
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/2kd8k0h7mkrwc444r9la48liyl2di3mx-cctools-port-895
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/2ws9cmamvr7xyvdg4d2nnd1bmr1zjrrq-bootstrap-tools
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/365x532d88lj3zyi84q1wmh00nlnr749-gnugrep-3.1
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/39mw7i8qjmvr94pqlx62znmkxw1ga17p-adv_cmds-osx-10.5.8-locale
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/3whkmrfls5pwdi5yxz8qfp7clsl17j7l-libffi-3.2.1
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/59rrgildqwf88nwrkf0xp3g1c46akf8k-Libsystem-osx-10.11.6
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/5im29qx9rni3w8l3j8i2yr22sin55kxv-cctools-binutils-darwin
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/6jmyb8qzjr77pnpflz3k95zyfhxd6x11-compiler-rt-5.0.2-dev
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/7hcnb7lk6q05zyq5g2x0yac89nk46yv8-bzip2-1.0.6.0.1-bin
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/7qw2hb02ychpaabvxs2yq16p1cc0i1jc-clang-wrapper-5.0.2
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/7vsmbgsp21kl7mvyp305ac13qzsh5bmk-gnutar-1.30
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/8jwl96k4va9bvcl8ds2rgjpq2073gbij-bash-interactive-4.4-p23
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/9a762m9ld7f6z0x5d47lvnnw2nd0f2xw-gettext-0.19.8.1
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/agvf6aqhvqszyjn4adb47rx008c1039k-ed-1.14.2
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/bc6vywbmvvwpk1bfk0dgpw3i192phlp3-libc++abi-5.0.2
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/c8zq9hdriqbm6cxlcdwkpqc3ivdbifz4-readline-7.0p5
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/cwgp49bjfc9hjmg63kcj3i2qyiqq1syl-ncurses-6.1
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/cwx4dshnbrjigh3g6zp1ln4wwdnm8agh-binutils-2.30
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/d3w7zyl2wdbl4ajilypfmn454d29c4pn-gzip-1.9
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/f0ymknfjldn3lsmxcm3wcrla2dp6bqiq-libc++-5.0.2
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/fjilysyz08s9vl1bdcf3vndndd4xfacj-bash-interactive-4.4-p23-dev
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/fsdil6i3g3lfpgmdvb22gbf9fm3pjr35-cctools-binutils-darwin-wrapper
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/g309ikgbr76zzn4809swx0j89qqlqygz-nix-info
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/gvxxgcbrxrvhl55cy2wf8m89hfrg8gqw-findutils-4.6.0
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/hyrxf63yjfcay6q1wp3dfc5y4xvshlal-expand-response-params
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/i18ihnf3rxkj1xdch5qalbqbkl8hb6my-bootstrap-stage2-binutils-wrapper
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/ilj27ynsxq0b965qr1m976mz8h2sy1g6-patch-2.7.6
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/jsylgldy52pv6rs2y4l04qszbwxjfh8y-libiconv-osx-10.11.6
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/kdnhvzavikc62vf5c5hyz2233x4pa136-gnused-4.5
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/kh9sj73nfqfkb1kn6fvvbqnwm5prg698-xz-5.2.4-bin
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/kv402lpbn0xrb0pm7v9kpxjvgndy3fxv-ICU-osx-10.10.5
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/ky17cjlbna5xlpwfsfmj2cvflmwhy4na-expand-response-params
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/l7d4nmsp8dkxqc1vz01vnfbm60mqnb7k-libc++-5.0.2
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/la4az1fd63wq795jl6siyml0044pxry6-bash-interactive-4.4-p23-doc
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/n7bh0pnddnckh9zs14wfz7snl7gkggv4-bash-4.4-p23-info
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/nib1qjrhkz4bsfp11kjqlqf93544mi11-bash-4.4-p23-doc
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/nvb1kr6nsd1q1s0qjj6ld1n8rpg5lc1w-libc++abi-5.0.2
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/p0cdc7rzf1a69k013vnf4av7a6xcsngp-llvm-5.0.2-lib
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/psry9nab69pwi27izxgy41zh7pccniqx-zlib-1.2.11
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/pss843nbpn833hjsb6yxsyrrazn0spkd-gawk-4.2.1
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/qmfzx3979byqsqg9dlg9mj058ac3axjp-bash-4.4-p23-man
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/qmxyi0v65y3k8xf8wjcdx4gsk39gijfi-bash-interactive-4.4-p23-man
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/qxpvlfwz9qjlf5v9vb636ihlfrfq2lxx-gmp-6.1.2
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/r765bx4lndy8ymwlq0b098cbgycpska4-DarwinTools-1
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/r7v5bfdxgimakcxj26xij8vr0n4yh03b-stdenv-darwin
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/rm5hs2mg6rw6p1j2fsaiyx4jnspr3qxs-coreutils-8.29
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/rq25z24vqncw9m9kljag531lsgi4lcws-diffutils-3.6
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/vqy0pk0ckzynzjrymccyfpfcjmfnaw1r-bash-4.4-p23-dev
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/vsgzq5h8fsywjw95h64azqpw4q9cswc9-CF-osx-10.10.5
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/ylmiw5xyc9j87i6bdfcj06ay4z3apz3k-gnumake-4.2.1
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/z0x9h91vvbavfgn48ybaz0vi9sczxn2i-pcre-8.42
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/z4k8fk58pw5lpm1bib1ijk1mpji0v033-xz-5.2.4
macos-highsierra-upgrade-simulation-test-login-interactive      /nix/store/zbhk0jhc9y8hmbcax9nvddbik3rgsary-bash-4.4-p23
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/nib1qjrhkz4bsfp11kjqlqf93544mi11-bash-4.4-p23-doc' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/n7bh0pnddnckh9zs14wfz7snl7gkggv4-bash-4.4-p23-info' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/qmfzx3979byqsqg9dlg9mj058ac3axjp-bash-4.4-p23-man' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/la4az1fd63wq795jl6siyml0044pxry6-bash-interactive-4.4-p23-doc' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/1vrn0x735avl7sq6mwf5h50slb4666j7-bash-interactive-4.4-p23-info' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/qmxyi0v65y3k8xf8wjcdx4gsk39gijfi-bash-interactive-4.4-p23-man' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/59rrgildqwf88nwrkf0xp3g1c46akf8k-Libsystem-osx-10.11.6' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/39mw7i8qjmvr94pqlx62znmkxw1ga17p-adv_cmds-osx-10.5.8-locale' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/2ws9cmamvr7xyvdg4d2nnd1bmr1zjrrq-bootstrap-tools' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/zbhk0jhc9y8hmbcax9nvddbik3rgsary-bash-4.4-p23' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/14k27li9psmi201brzm3yhilm7nq0cfc-bzip2-1.0.6.0.1' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/hyrxf63yjfcay6q1wp3dfc5y4xvshlal-expand-response-params' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/pss843nbpn833hjsb6yxsyrrazn0spkd-gawk-4.2.1' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/ylmiw5xyc9j87i6bdfcj06ay4z3apz3k-gnumake-4.2.1' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/kdnhvzavikc62vf5c5hyz2233x4pa136-gnused-4.5' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/bc6vywbmvvwpk1bfk0dgpw3i192phlp3-libc++abi-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/3whkmrfls5pwdi5yxz8qfp7clsl17j7l-libffi-3.2.1' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/jsylgldy52pv6rs2y4l04qszbwxjfh8y-libiconv-osx-10.11.6' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/cwgp49bjfc9hjmg63kcj3i2qyiqq1syl-ncurses-6.1' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/z0x9h91vvbavfgn48ybaz0vi9sczxn2i-pcre-8.42' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/z4k8fk58pw5lpm1bib1ijk1mpji0v033-xz-5.2.4' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/psry9nab69pwi27izxgy41zh7pccniqx-zlib-1.2.11' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/f0ymknfjldn3lsmxcm3wcrla2dp6bqiq-libc++-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/cwx4dshnbrjigh3g6zp1ln4wwdnm8agh-binutils-2.30' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/7hcnb7lk6q05zyq5g2x0yac89nk46yv8-bzip2-1.0.6.0.1-bin' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/agvf6aqhvqszyjn4adb47rx008c1039k-ed-1.14.2' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/365x532d88lj3zyi84q1wmh00nlnr749-gnugrep-3.1' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/d3w7zyl2wdbl4ajilypfmn454d29c4pn-gzip-1.9' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/kh9sj73nfqfkb1kn6fvvbqnwm5prg698-xz-5.2.4-bin' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/ilj27ynsxq0b965qr1m976mz8h2sy1g6-patch-2.7.6' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/kv402lpbn0xrb0pm7v9kpxjvgndy3fxv-ICU-osx-10.10.5' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/2kd8k0h7mkrwc444r9la48liyl2di3mx-cctools-port-895' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/04bnzqnqivgxrhly898ys6jhvb7r77z8-compiler-rt-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/9a762m9ld7f6z0x5d47lvnnw2nd0f2xw-gettext-0.19.8.1' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/qxpvlfwz9qjlf5v9vb636ihlfrfq2lxx-gmp-6.1.2' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/rm5hs2mg6rw6p1j2fsaiyx4jnspr3qxs-coreutils-8.29' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/6jmyb8qzjr77pnpflz3k95zyfhxd6x11-compiler-rt-5.0.2-dev' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/2571v4g663w2490rzm1qi4qrzj1qijw5-clang-5.0.2-lib' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/p0cdc7rzf1a69k013vnf4av7a6xcsngp-llvm-5.0.2-lib' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/rq25z24vqncw9m9kljag531lsgi4lcws-diffutils-3.6' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/gvxxgcbrxrvhl55cy2wf8m89hfrg8gqw-findutils-4.6.0' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/vsgzq5h8fsywjw95h64azqpw4q9cswc9-CF-osx-10.10.5' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/7vsmbgsp21kl7mvyp305ac13qzsh5bmk-gnutar-1.30' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/r765bx4lndy8ymwlq0b098cbgycpska4-DarwinTools-1' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/c8zq9hdriqbm6cxlcdwkpqc3ivdbifz4-readline-7.0p5' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/g309ikgbr76zzn4809swx0j89qqlqygz-nix-info' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/5im29qx9rni3w8l3j8i2yr22sin55kxv-cctools-binutils-darwin' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/fsdil6i3g3lfpgmdvb22gbf9fm3pjr35-cctools-binutils-darwin-wrapper' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/19xwrnwwdhx278wd2hzf0f4fhd619fqv-clang-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/ky17cjlbna5xlpwfsfmj2cvflmwhy4na-expand-response-params' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/nvb1kr6nsd1q1s0qjj6ld1n8rpg5lc1w-libc++abi-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/i18ihnf3rxkj1xdch5qalbqbkl8hb6my-bootstrap-stage2-binutils-wrapper' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/l7d4nmsp8dkxqc1vz01vnfbm60mqnb7k-libc++-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/0h6cl7wfja45d46gid9fyrpwf1xy2jns-bootstrap-stage2-clang-wrapper' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/vqy0pk0ckzynzjrymccyfpfcjmfnaw1r-bash-4.4-p23-dev' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/7qw2hb02ychpaabvxs2yq16p1cc0i1jc-clang-wrapper-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/8jwl96k4va9bvcl8ds2rgjpq2073gbij-bash-interactive-4.4-p23' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/r7v5bfdxgimakcxj26xij8vr0n4yh03b-stdenv-darwin' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    copying path '/nix/store/fjilysyz08s9vl1bdcf3vndndd4xfacj-bash-interactive-4.4-p23-dev' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive    Starting: testexitok
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::runtest::43 testexitok
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::testexitok::8 /bin/bash -c 'exit 0'
macos-highsierra-upgrade-simulation-test-login-interactive    Finishing: testexitok, duration:0 result:0
macos-highsierra-upgrade-simulation-test-login-interactive    Starting: testexitfail
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::runtest::43 testexitfail
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::testexitfail::12 /bin/bash -c 'exit 1'
macos-highsierra-upgrade-simulation-test-login-interactive    Finishing: testexitfail, duration:0 result:1
macos-highsierra-upgrade-simulation-test-login-interactive    Starting: testshell
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::runtest::43 testshell
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::testshell::16 nix-shell -p hello --run hello
macos-highsierra-upgrade-simulation-test-login-interactive        these paths will be fetched (0.02 MiB download, 0.07 MiB unpacked):
macos-highsierra-upgrade-simulation-test-login-interactive          /nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10
macos-highsierra-upgrade-simulation-test-login-interactive        copying path '/nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive        Hello, world!
macos-highsierra-upgrade-simulation-test-login-interactive    Finishing: testshell, duration:3 result:0
macos-highsierra-upgrade-simulation-test-login-interactive    Starting: testnixenv
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::runtest::43 testnixenv
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
macos-highsierra-upgrade-simulation-test-login-interactive        installing 'hello-2.10'
macos-highsierra-upgrade-simulation-test-login-interactive        building '/nix/store/l0hp7hmcppm59dw0klxnvyybgdi2xl50-user-environment.drv'...
macos-highsierra-upgrade-simulation-test-login-interactive        created 2 symlinks in user environment
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::testnixenv::21 hello
macos-highsierra-upgrade-simulation-test-login-interactive        Hello, world!
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::testnixenv::22 nix-env --uninstall 'hello.*'
macos-highsierra-upgrade-simulation-test-login-interactive        uninstalling 'hello-2.10'
macos-highsierra-upgrade-simulation-test-login-interactive        building '/nix/store/xsk9wjy0dpp7w7d3r3bkzxzaklqdzq6q-user-environment.drv'...
macos-highsierra-upgrade-simulation-test-login-interactive        created 0 symlinks in user environment
macos-highsierra-upgrade-simulation-test-login-interactive    Finishing: testnixenv, duration:0 result:0
macos-highsierra-upgrade-simulation-test-login-interactive    Starting: testnixchannel
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::runtest::43 testnixchannel
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::testnixchannel::27 nix-channel --update
macos-highsierra-upgrade-simulation-test-login-interactive        unpacking channels...
macos-highsierra-upgrade-simulation-test-login-interactive        created 2 symlinks in user environment
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::testnixchannel::28 nix-env -iA nixos-18-03.hello
macos-highsierra-upgrade-simulation-test-login-interactive        installing 'hello-2.10'
macos-highsierra-upgrade-simulation-test-login-interactive        these paths will be fetched (8.97 MiB download, 47.60 MiB unpacked):
macos-highsierra-upgrade-simulation-test-login-interactive          /nix/store/cr3s0wfg4b0vpqf4avxbs2cjyh8ik8x5-hello-2.10
macos-highsierra-upgrade-simulation-test-login-interactive          /nix/store/gagv3nkbppdjb78csszx77agzdzlpg46-libc++-5.0.2
macos-highsierra-upgrade-simulation-test-login-interactive          /nix/store/madyr371ywi25cyd0ac6l4jgbpfks0l2-ICU-osx-10.10.5
macos-highsierra-upgrade-simulation-test-login-interactive          /nix/store/n424yw4ws0hmaps1gh26g4hdibfimc8k-libc++abi-5.0.2
macos-highsierra-upgrade-simulation-test-login-interactive          /nix/store/yvkvyvc36l2dmwl22vajc8bdg7fv3p6b-Libsystem-osx-10.11.6
macos-highsierra-upgrade-simulation-test-login-interactive          /nix/store/z9lvlxdmlbwg00j2drhwm8b6f8j4xqx5-CF-osx-10.10.5
macos-highsierra-upgrade-simulation-test-login-interactive        copying path '/nix/store/yvkvyvc36l2dmwl22vajc8bdg7fv3p6b-Libsystem-osx-10.11.6' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive        copying path '/nix/store/n424yw4ws0hmaps1gh26g4hdibfimc8k-libc++abi-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive        copying path '/nix/store/gagv3nkbppdjb78csszx77agzdzlpg46-libc++-5.0.2' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive        copying path '/nix/store/madyr371ywi25cyd0ac6l4jgbpfks0l2-ICU-osx-10.10.5' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive        copying path '/nix/store/z9lvlxdmlbwg00j2drhwm8b6f8j4xqx5-CF-osx-10.10.5' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive        copying path '/nix/store/cr3s0wfg4b0vpqf4avxbs2cjyh8ik8x5-hello-2.10' from 'https://cache.nixos.org'...
macos-highsierra-upgrade-simulation-test-login-interactive        building '/nix/store/796cy480iaqz51d3bmwsdw478zg4rfg9-user-environment.drv'...
macos-highsierra-upgrade-simulation-test-login-interactive        created 2 symlinks in user environment
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::testnixchannel::29 hello
macos-highsierra-upgrade-simulation-test-login-interactive        Hello, world!
macos-highsierra-upgrade-simulation-test-login-interactive         ./testscript::testnixchannel::30 nix-env --uninstall 'hello.*'
macos-highsierra-upgrade-simulation-test-login-interactive        uninstalling 'hello-2.10'
macos-highsierra-upgrade-simulation-test-login-interactive    Finishing: testnixchannel, duration:27 result:0
macos-highsierra-upgrade-simulation-test-interactive    ./testscript: line 60: nix-shell: command not found
macos-highsierra-upgrade-simulation-test-interactive    Starting: testexitok
macos-highsierra-upgrade-simulation-test-interactive         ./testscript::runtest::43 testexitok
macos-highsierra-upgrade-simulation-test-interactive         ./testscript::testexitok::8 /bin/bash -c 'exit 0'
macos-highsierra-upgrade-simulation-test-interactive    Finishing: testexitok, duration:0 result:0
macos-highsierra-upgrade-simulation-test-interactive    Starting: testexitfail
macos-highsierra-upgrade-simulation-test-interactive         ./testscript::runtest::43 testexitfail
macos-highsierra-upgrade-simulation-test-interactive         ./testscript::testexitfail::12 /bin/bash -c 'exit 1'
macos-highsierra-upgrade-simulation-test-interactive    Finishing: testexitfail, duration:0 result:1
macos-highsierra-upgrade-simulation-test-interactive    Starting: testshell
macos-highsierra-upgrade-simulation-test-interactive         ./testscript::runtest::43 testshell
macos-highsierra-upgrade-simulation-test-interactive         ./testscript::testshell::16 nix-shell -p hello --run hello
macos-highsierra-upgrade-simulation-test-interactive        ./testscript: line 16: nix-shell: command not found
macos-highsierra-upgrade-simulation-test-interactive    Finishing: testshell, duration:0 result:127
macos-highsierra-upgrade-simulation-test-interactive    Starting: testnixenv
macos-highsierra-upgrade-simulation-test-interactive         ./testscript::runtest::43 testnixenv
macos-highsierra-upgrade-simulation-test-interactive         ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
macos-highsierra-upgrade-simulation-test-interactive        ./testscript: line 20: nix-env: command not found
macos-highsierra-upgrade-simulation-test-interactive    Finishing: testnixenv, duration:0 result:127
macos-highsierra-upgrade-simulation-test-interactive    Starting: testnixchannel
macos-highsierra-upgrade-simulation-test-interactive         ./testscript::runtest::43 testnixchannel
macos-highsierra-upgrade-simulation-test-interactive         ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
macos-highsierra-upgrade-simulation-test-interactive        ./testscript: line 26: nix-channel: command not found
macos-highsierra-upgrade-simulation-test-interactive    Finishing: testnixchannel, duration:0 result:127
macos-highsierra-upgrade-simulation-test-ssh    ./testscript: line 60: nix-shell: command not found
macos-highsierra-upgrade-simulation-test-ssh    Starting: testexitok
macos-highsierra-upgrade-simulation-test-ssh         ./testscript::runtest::43 testexitok
macos-highsierra-upgrade-simulation-test-ssh         ./testscript::testexitok::8 /bin/bash -c 'exit 0'
macos-highsierra-upgrade-simulation-test-ssh    Finishing: testexitok, duration:0 result:0
macos-highsierra-upgrade-simulation-test-ssh    Starting: testexitfail
macos-highsierra-upgrade-simulation-test-ssh         ./testscript::runtest::43 testexitfail
macos-highsierra-upgrade-simulation-test-ssh         ./testscript::testexitfail::12 /bin/bash -c 'exit 1'
macos-highsierra-upgrade-simulation-test-ssh    Finishing: testexitfail, duration:0 result:1
macos-highsierra-upgrade-simulation-test-ssh    Starting: testshell
macos-highsierra-upgrade-simulation-test-ssh         ./testscript::runtest::43 testshell
macos-highsierra-upgrade-simulation-test-ssh         ./testscript::testshell::16 nix-shell -p hello --run hello
macos-highsierra-upgrade-simulation-test-ssh        ./testscript: line 16: nix-shell: command not found
macos-highsierra-upgrade-simulation-test-ssh    Finishing: testshell, duration:0 result:127
macos-highsierra-upgrade-simulation-test-ssh    Starting: testnixenv
macos-highsierra-upgrade-simulation-test-ssh         ./testscript::runtest::43 testnixenv
macos-highsierra-upgrade-simulation-test-ssh         ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
macos-highsierra-upgrade-simulation-test-ssh        ./testscript: line 20: nix-env: command not found
macos-highsierra-upgrade-simulation-test-ssh    Finishing: testnixenv, duration:0 result:127
macos-highsierra-upgrade-simulation-test-ssh    Starting: testnixchannel
macos-highsierra-upgrade-simulation-test-ssh         ./testscript::runtest::43 testnixchannel
macos-highsierra-upgrade-simulation-test-ssh         ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
macos-highsierra-upgrade-simulation-test-ssh        ./testscript: line 26: nix-channel: command not found
macos-highsierra-upgrade-simulation-test-ssh    Finishing: testnixchannel, duration:0 result:127
</pre>
<h2 id="detail-install-default-macos-sierra-image-name">install-default-macos-sierra-image-name</h1><pre>macos-sierra
</pre>
<h2 id="detail-install-default-macos-sierra-install-method">install-default-macos-sierra-install-method</h1><pre>install-default
</pre>
<h2 id="detail-install-default-macos-sierra-run-log">install-default-macos-sierra-run-log</h1><pre>Bringing machine 'default' up with 'virtualbox' provider...
==> default: Importing base box 'jhcook/macos-sierra'...
[KProgress: 10%[KProgress: 20%[KProgress: 70%[KProgress: 90%[K==> default: Matching MAC address for NAT networking...
==> default: Checking if box 'jhcook/macos-sierra' is up to date...
==> default: Setting the name of the VM: tmpCQBg7XJJZM_default_1535035005896_59566
==> default: Clearing any previously set network interfaces...
==> default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==> default: Forwarding ports...
    default: 22 (guest) => 2222 (host) (adapter 1)
==> default: Running 'pre-boot' VM customizations...
==> default: Booting VM...
==> default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
==> default: Machine booted and ready!
==> default: Checking for guest additions in VM...
    default: No guest additions were detected on the base box for this VM! Guest
    default: additions are required for forwarded ports, shared folders, host only
    default: networking, and more. If SSH fails on this machine, please install
    default: the guest additions and repackage the box to continue.
    default: 
    default: This is not an error message; everything may continue to work properly,
    default: in which case you may ignore this message.
==> default: Running provisioner: shell...
    default: Running: inline script
    default: The chosen disk supports resize; disregarding your new file system type and volume name
    default: Merging partitions into a new partition
    default:      Start partition: disk0s2 Macintosh HDD
    default:      Finish partition: disk0s3 Untitled
    default: Started partitioning on disk0
    default: Merging partitions
    default: Waiting for partitions to activate
    default: Growing disk
    default: Finished partitioning on disk0
    default: /dev/disk0 (internal, physical):
    default:    #:                       TYPE NAME                    SIZE       IDENTIFIER
    default:    0:      GUID_partition_scheme                        *137.4 GB   disk0
    default:    1:                        EFI EFI                     209.7 MB   disk0s1
    default:    2:                  Apple_HFS Macintosh HDD           137.1 GB   disk0s2
==> default: Running provisioner: shell...
    default: Running: inline script
==> default: Running provisioner: shell...
    default: Running: inline script
    default: No preInstallUnprivileged rules.
#!/bin/sh

set -eux

curl custom-install-thing | bash
#!/usr/bin/env bash

export PS4=' ''${BASH_SOURCE}::''${FUNCNAME[0]}::$LINENO '
set -u
set -o pipefail

testexitok() (
    /bin/bash -c "exit 0"
)

testexitfail() (
    /bin/bash -c "exit 1"
)

testshell() (
  nix-shell -p hello --run hello
)

testnixenv() (
  nix-env -iA nixpkgs.hello
  hello
  nix-env --uninstall 'hello.*'
)

testnixchannel() (
  nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
  nix-channel --update
  nix-env -iA nixos-18-03.hello
  hello
  nix-env --uninstall 'hello.*'
)

runtest() {
    testFn=$1

    local testdir="$TESTDIR/tests/$testFn"
    mkdir -p "$testdir"

    start=$(date '+%s')
    echo "Starting: $testFn"
    (
        set -ex
        "$testFn"
    ) 2>&1 | tee "$testdir/log" | sed 's/^/    /'
    exitcode=$?
    end=$(date '+%s')
    duration=$((end - start))
    echo "$exitcode" > "$testdir/exitcode"
    echo "$duration" > "$testdir/duration"

    echo "Finishing: $testFn, duration:$duration result:$exitcode"
}

main() {
    readonly TESTDIR=./nix-test-matrix-log
    rm -rf "$TESTDIR"
    mkdir "$TESTDIR"

    uname -a > "$TESTDIR/uname"
    nix-shell -p nix-info --run "nix-info -m" > "$TESTDIR/nix-info"
    (
        runtest testexitok
        runtest testexitfail
        runtest testshell
        runtest testnixenv
        runtest testnixchannel
    )

    tar -cf ./nix-test-matrix-log.tar "$TESTDIR"
}

main
macos-sierra-install    + curl custom-install-thing
macos-sierra-install    + bash
macos-sierra-install      % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
macos-sierra-install                                     Dload  Upload   Total   Spent    Left  Speed
macos-sierra-install      0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0 56  408k   56  230k    0     0   172k      0  0:00:02  0:00:01  0:00:01  172k100  408k  100  408k    0     0   194k      0  0:00:02  0:00:02 --:--:--  195k
macos-sierra-install    Welcome to the foobar nix upstaller (updater/installer)!
macos-sierra-install    We're going to make it so your system is running the right version of Nix with the right foobar-specific configuration!
macos-sierra-install    First, we're going to do some first-pass validation to make sure we know how to work with your system.
macos-sierra-install    Checking for curl...
macos-sierra-install    OK
macos-sierra-install    Checking for sudo...
macos-sierra-install    OK
macos-sierra-install    Checking for connectivity to foobar binrepo...
macos-sierra-install    OK
macos-sierra-install    OK, initial checks look good.
macos-sierra-install    Now we need to check if you have Nix installed, and get it if not.
macos-sierra-install    You don't have Nix installed yet, let's fix that.
macos-sierra-install    Checking for connectivity to the NixOS.org binary cache...
macos-sierra-install    OK, downloading and running the upstream installer.
macos-sierra-install    downloading Nix 2.0.3 binary tarball for x86_64-darwin from 'https://nixos.org/releases/nix/nix-2.0.3/nix-2.0.3-x86_64-darwin.tar.bz2' to '/var/folders/rm/ywx69srx1kq_dtjz2ynznn000000gp/T/nix-binary-tarball-unpack.XXXXXXXXXX.WHIvZQSL'...
macos-sierra-install      % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
macos-sierra-install                                     Dload  Upload   Total   Spent    Left  Speed
macos-sierra-install      0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0 25.3M    0 16384    0     0  17833      0  0:24:48 --:--:--  0:24:48 17828  3 25.3M    3  896k    0     0   484k      0  0:00:53  0:00:01  0:00:52  484k  7 25.3M    7 2048k    0     0   716k      0  0:00:36  0:00:02  0:00:34  716k 12 25.3M   12 3360k    0     0   869k      0  0:00:29  0:00:03  0:00:26  869k 18 25.3M   18 4784k    0     0   982k      0  0:00:26  0:00:04  0:00:22  982k 24 25.3M   24 6240k    0     0  1066k      0  0:00:24  0:00:05  0:00:19 1261k 30 25.3M   30 7840k    0     0  1144k      0  0:00:22  0:00:06  0:00:16 1388k 36 25.3M   36 9520k    0     0  1212k      0  0:00:21  0:00:07  0:00:14 1495k 43 25.3M   43 11.0M    0     0  1279k      0  0:00:20  0:00:08  0:00:12 1597k 50 25.3M   50 12.8M    0     0  1335k      0  0:00:19  0:00:09  0:00:10 1681k 58 25.3M   58 14.8M    0     0  1399k      0  0:00:18  0:00:10  0:00:08 1789k 66 25.3M   66 16.8M    0     0  1452k      0  0:00:17  0:00:11  0:00:06 1874k 74 25.3M   74 18.9M    0     0  1511k      0  0:00:17  0:00:12  0:00:05 1981k 83 25.3M   83 21.1M    0     0  1564k      0  0:00:16  0:00:13  0:00:03 2066k 92 25.3M   92 23.4M    0     0  1619k      0  0:00:16  0:00:14  0:00:02 2178k100 25.3M  100 25.3M    0     0  1662k      0  0:00:15  0:00:15 --:--:-- 2263k
macos-sierra-install    [1;31mSwitching to the Daemon-based Installer[0m
macos-sierra-install    [38;32mWelcome to the Multi-User Nix Installation
macos-sierra-install    [0m
macos-sierra-install    This installation tool will set up your computer with the Nix package
macos-sierra-install    manager. This will happen in a few stages:
macos-sierra-install    
macos-sierra-install    1. Make sure your computer doesn't already have Nix. If it does, I
macos-sierra-install       will show you instructions on how to clean up your old one.
macos-sierra-install    
macos-sierra-install    2. Show you what we are going to install and where. Then we will ask
macos-sierra-install       if you are ready to continue.
macos-sierra-install    
macos-sierra-install    3. Create the system users and groups that the Nix daemon uses to run
macos-sierra-install       builds.
macos-sierra-install    
macos-sierra-install    4. Perform the basic installation of the Nix files daemon.
macos-sierra-install    
macos-sierra-install    5. Configure your shell to import special Nix Profile files, so you
macos-sierra-install       can use Nix.
macos-sierra-install    
macos-sierra-install    6. Start the Nix daemon.
macos-sierra-install    
macos-sierra-install    [38;32m[38;4;32mWould you like to see a more detailed list of what we will do?
macos-sierra-install    [0mNo TTY, assuming you would say yes :)
macos-sierra-install    
macos-sierra-install    We will:
macos-sierra-install    
macos-sierra-install     - make sure your computer doesn't already have Nix files
macos-sierra-install       (if it does, I  will tell you how to clean them up.)
macos-sierra-install     - create local users (see the list above for the users we'll make)
macos-sierra-install     - create a local group (nixbld)
macos-sierra-install     - install Nix in to /nix
macos-sierra-install     - create a configuration file in /etc/nix
macos-sierra-install     - set up the "default profile" by creating some Nix-related files in
macos-sierra-install       /var/root
macos-sierra-install     - back up /etc/bashrc to /etc/bashrc.backup-before-nix
macos-sierra-install     - update /etc/bashrc to include some Nix configuration
macos-sierra-install     - back up /etc/zshrc to /etc/zshrc.backup-before-nix
macos-sierra-install     - update /etc/zshrc to include some Nix configuration
macos-sierra-install     - load and start a LaunchDaemon (at /Library/LaunchDaemons/org.nixos.nix-daemon.plist) for nix-daemon
macos-sierra-install    
macos-sierra-install    [38;32m[38;4;32mReady to continue?
macos-sierra-install    [0mNo TTY, assuming you would say yes :)
macos-sierra-install    
macos-sierra-install    [38;34m---- let's talk about sudo -----------------------------------------------------
macos-sierra-install    [0mThis script is going to call sudo a lot. Normally, it would show you
macos-sierra-install    exactly what commands it is running and why. However, the script is
macos-sierra-install    run in a headless fashion, like this:
macos-sierra-install    
macos-sierra-install      $ curl https://nixos.org/nix/install | sh
macos-sierra-install    
macos-sierra-install    or maybe in a CI pipeline. Because of that, we're going to skip the
macos-sierra-install    verbose output in the interest of brevity.
macos-sierra-install    
macos-sierra-install    If you would like to
macos-sierra-install    see the output, try like this:
macos-sierra-install    
macos-sierra-install      $ curl -o install-nix https://nixos.org/nix/install
macos-sierra-install      $ sh ./install-nix
macos-sierra-install    
macos-sierra-install    
macos-sierra-install    [38;34m---- Nix config report ---------------------------------------------------------
macos-sierra-install    [0m[38;1m        Temp Dir[0m:	/var/folders/rm/ywx69srx1kq_dtjz2ynznn000000gp/T/tmp.XXXXXXXXXX.frmVT7kz
macos-sierra-install    [38;1m        Nix Root[0m:	/nix
macos-sierra-install    [38;1m     Build Users[0m:	32
macos-sierra-install    [38;1m  Build Group ID[0m:	30000
macos-sierra-install    [38;1mBuild Group Name[0m:	nixbld
macos-sierra-install    
macos-sierra-install    [38;4;34mbuild users:
macos-sierra-install    [0m[38;1m    Username[0m:	UID
macos-sierra-install    [38;1m     nixbld1[0m:	30001
macos-sierra-install    [38;1m     nixbld2[0m:	30002
macos-sierra-install    [38;1m     nixbld3[0m:	30003
macos-sierra-install    [38;1m     nixbld4[0m:	30004
macos-sierra-install    [38;1m     nixbld5[0m:	30005
macos-sierra-install    [38;1m     nixbld6[0m:	30006
macos-sierra-install    [38;1m     nixbld7[0m:	30007
macos-sierra-install    [38;1m     nixbld8[0m:	30008
macos-sierra-install    [38;1m     nixbld9[0m:	30009
macos-sierra-install    [38;1m     nixbld10[0m:	30010
macos-sierra-install    [38;1m     nixbld11[0m:	30011
macos-sierra-install    [38;1m     nixbld12[0m:	30012
macos-sierra-install    [38;1m     nixbld13[0m:	30013
macos-sierra-install    [38;1m     nixbld14[0m:	30014
macos-sierra-install    [38;1m     nixbld15[0m:	30015
macos-sierra-install    [38;1m     nixbld16[0m:	30016
macos-sierra-install    [38;1m     nixbld17[0m:	30017
macos-sierra-install    [38;1m     nixbld18[0m:	30018
macos-sierra-install    [38;1m     nixbld19[0m:	30019
macos-sierra-install    [38;1m     nixbld20[0m:	30020
macos-sierra-install    [38;1m     nixbld21[0m:	30021
macos-sierra-install    [38;1m     nixbld22[0m:	30022
macos-sierra-install    [38;1m     nixbld23[0m:	30023
macos-sierra-install    [38;1m     nixbld24[0m:	30024
macos-sierra-install    [38;1m     nixbld25[0m:	30025
macos-sierra-install    [38;1m     nixbld26[0m:	30026
macos-sierra-install    [38;1m     nixbld27[0m:	30027
macos-sierra-install    [38;1m     nixbld28[0m:	30028
macos-sierra-install    [38;1m     nixbld29[0m:	30029
macos-sierra-install    [38;1m     nixbld30[0m:	30030
macos-sierra-install    [38;1m     nixbld31[0m:	30031
macos-sierra-install    [38;1m     nixbld32[0m:	30032
macos-sierra-install    
macos-sierra-install    [38;32m[38;4;32mReady to continue?
macos-sierra-install    [0mNo TTY, assuming you would say yes :)
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build group nixbld
macos-sierra-install    [0m[38;1m            Created[0m:	Yes
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld1
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 1
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld2
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 2
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld3
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 3
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld4
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 4
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld5
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 5
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld6
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 6
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld7
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 7
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld8
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 8
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld9
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 9
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld10
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 10
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld11
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 11
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld12
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 12
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld13
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 13
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld14
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 14
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld15
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 15
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld16
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 16
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld17
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 17
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld18
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 18
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld19
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 19
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld20
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 20
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld21
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 21
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld22
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 22
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld23
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 23
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld24
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 24
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld25
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 25
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld26
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 26
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld27
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 27
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld28
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 28
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld29
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 29
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld30
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 30
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld31
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 31
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install    
macos-sierra-install    [38;32m~~> Setting up the build user nixbld32
macos-sierra-install    [0m[38;1m           Created[0m:	Yes
macos-sierra-install    [38;1m            Hidden[0m:	Yes
macos-sierra-install    [38;1m    Home Directory[0m:	/var/empty
macos-sierra-install    [38;1m              Note[0m:	Nix build user 32
macos-sierra-install    [38;1m   Logins Disabled[0m:	Yes
macos-sierra-install    [38;1m  Member of nixbld[0m:	Yes
macos-sierra-install    [38;1m    PrimaryGroupID[0m:	30000
macos-sierra-install          Alright! We have our first nix at /nix/store/2jp9d9qns3372hkx4k523hc1bbzkr4yp-nix-2.0.3
macos-sierra-install          Just finished getting the nix database ready.
macos-sierra-install    
macos-sierra-install    # Nix
macos-sierra-install    if [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then
macos-sierra-install      . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'
macos-sierra-install    fi
macos-sierra-install    # End Nix
macos-sierra-install    
macos-sierra-install    
macos-sierra-install    # Nix
macos-sierra-install    if [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then
macos-sierra-install      . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'
macos-sierra-install    fi
macos-sierra-install    # End Nix
macos-sierra-install    
macos-sierra-install    installing 'nix-2.0.3'
macos-sierra-install    building '/nix/store/jp5371ld47218v5bzc6m5584l8b8w2n1-user-environment.drv'...
macos-sierra-install    created 7 symlinks in user environment
macos-sierra-install    unpacking channels...
macos-sierra-install    created 2 symlinks in user environment
macos-sierra-install    [38;32mAlright! We're done!
macos-sierra-install    [0m
macos-sierra-install    Before Nix will work in your existing shells, you'll need to close
macos-sierra-install    them and open them again. Other than that, you should be ready to go.
macos-sierra-install    
macos-sierra-install    Try it! Open a new terminal, and type:
macos-sierra-install    
macos-sierra-install      $ nix-shell -p nix-info --run "nix-info -m"
macos-sierra-install    
macos-sierra-install    Thank you for using this installer. If you have any feedback, don't
macos-sierra-install    hesitate:
macos-sierra-install    
macos-sierra-install    We'd love to help if you need it.
macos-sierra-install    
macos-sierra-install    If you can, open an issue at https://github.com/nixos/nix/issues
macos-sierra-install    
macos-sierra-install    Or feel free to contact the team,
macos-sierra-install     - on IRC #nixos on irc.freenode.net
macos-sierra-install     - on twitter @nixos_org
macos-sierra-install    OK, Nix is installed.
macos-sierra-install    Now we're going to hand-off control to the real upstaller, fetched from artifactory.
macos-sierra-install    Determining the required path from Artifactory...
macos-sierra-install    OK, pulling /nix/store/cb1av2jhzbhrvbcx4jafsrcpxszn531p-real-upstaller from Artifactory...
macos-sierra-install    We're going to need to run under sudo for this part so we can fetch paths from the foobar binary cache even if it hasn't been configured system-wide yet.
macos-sierra-install    OK, handing off to the real upstaller.
macos-sierra-install    Updating Nix, foobar nix.conf, and the upstaller script for your system profile.
macos-sierra-install    We're going to need to run under sudo for this part.
macos-sierra-install    replacing old 'nix-2.0.3'
macos-sierra-install    installing 'nix-2.0pre6137_e3cdcf89'
macos-sierra-install    installing 'foobar-nix-config'
macos-sierra-install    installing 'foobar-nix-upstaller'
macos-sierra-install    installing 'foobar-ca-bundle'
macos-sierra-install    installing 'linuxkit-builder'
macos-sierra-install    building '/nix/store/slqwb9zapl6jm2i9qyccx5x5l5vxjzk7-user-environment.drv'...
macos-sierra-install    created 23 symlinks in user environment
macos-sierra-install    Updating system channels
macos-sierra-install    unpacking channels...
macos-sierra-install    created 2 symlinks in user environment
macos-sierra-install    Restarting your system-wide nix-daemon process (will require sudo)
macos-sierra-install    Installation successful!
macos-sierra-install    Since this is your first time installing Nix, you may need to reopen your terminal or exit your session to get your environment set up right.
macos-sierra-install    To test, see if running 'nix --version' succeeds.
macos-sierra-test-login    ./testscript: line 60: nix-shell: command not found
macos-sierra-test-login    Starting: testexitok
macos-sierra-test-login         ./testscript::runtest::43 testexitok
macos-sierra-test-login         ./testscript::testexitok::8 /bin/bash -c 'exit 0'
macos-sierra-test-login    Finishing: testexitok, duration:0 result:0
macos-sierra-test-login    Starting: testexitfail
macos-sierra-test-login         ./testscript::runtest::43 testexitfail
macos-sierra-test-login         ./testscript::testexitfail::12 /bin/bash -c 'exit 1'
macos-sierra-test-login    Finishing: testexitfail, duration:0 result:1
macos-sierra-test-login    Starting: testshell
macos-sierra-test-login         ./testscript::runtest::43 testshell
macos-sierra-test-login         ./testscript::testshell::16 nix-shell -p hello --run hello
macos-sierra-test-login        ./testscript: line 16: nix-shell: command not found
macos-sierra-test-login    Finishing: testshell, duration:0 result:127
macos-sierra-test-login    Starting: testnixenv
macos-sierra-test-login         ./testscript::runtest::43 testnixenv
macos-sierra-test-login         ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
macos-sierra-test-login        ./testscript: line 20: nix-env: command not found
macos-sierra-test-login    Finishing: testnixenv, duration:0 result:127
macos-sierra-test-login    Starting: testnixchannel
macos-sierra-test-login         ./testscript::runtest::43 testnixchannel
macos-sierra-test-login         ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
macos-sierra-test-login        ./testscript: line 26: nix-channel: command not found
macos-sierra-test-login    Finishing: testnixchannel, duration:1 result:127
macos-sierra-test-login-interactive    these paths will be fetched (155.11 MiB download, 818.36 MiB unpacked):
macos-sierra-test-login-interactive      /nix/store/04bnzqnqivgxrhly898ys6jhvb7r77z8-compiler-rt-5.0.2
macos-sierra-test-login-interactive      /nix/store/0h6cl7wfja45d46gid9fyrpwf1xy2jns-bootstrap-stage2-clang-wrapper
macos-sierra-test-login-interactive      /nix/store/14k27li9psmi201brzm3yhilm7nq0cfc-bzip2-1.0.6.0.1
macos-sierra-test-login-interactive      /nix/store/19xwrnwwdhx278wd2hzf0f4fhd619fqv-clang-5.0.2
macos-sierra-test-login-interactive      /nix/store/1vrn0x735avl7sq6mwf5h50slb4666j7-bash-interactive-4.4-p23-info
macos-sierra-test-login-interactive      /nix/store/2571v4g663w2490rzm1qi4qrzj1qijw5-clang-5.0.2-lib
macos-sierra-test-login-interactive      /nix/store/2kd8k0h7mkrwc444r9la48liyl2di3mx-cctools-port-895
macos-sierra-test-login-interactive      /nix/store/2ws9cmamvr7xyvdg4d2nnd1bmr1zjrrq-bootstrap-tools
macos-sierra-test-login-interactive      /nix/store/365x532d88lj3zyi84q1wmh00nlnr749-gnugrep-3.1
macos-sierra-test-login-interactive      /nix/store/39mw7i8qjmvr94pqlx62znmkxw1ga17p-adv_cmds-osx-10.5.8-locale
macos-sierra-test-login-interactive      /nix/store/3whkmrfls5pwdi5yxz8qfp7clsl17j7l-libffi-3.2.1
macos-sierra-test-login-interactive      /nix/store/59rrgildqwf88nwrkf0xp3g1c46akf8k-Libsystem-osx-10.11.6
macos-sierra-test-login-interactive      /nix/store/5im29qx9rni3w8l3j8i2yr22sin55kxv-cctools-binutils-darwin
macos-sierra-test-login-interactive      /nix/store/6jmyb8qzjr77pnpflz3k95zyfhxd6x11-compiler-rt-5.0.2-dev
macos-sierra-test-login-interactive      /nix/store/7hcnb7lk6q05zyq5g2x0yac89nk46yv8-bzip2-1.0.6.0.1-bin
macos-sierra-test-login-interactive      /nix/store/7qw2hb02ychpaabvxs2yq16p1cc0i1jc-clang-wrapper-5.0.2
macos-sierra-test-login-interactive      /nix/store/7vsmbgsp21kl7mvyp305ac13qzsh5bmk-gnutar-1.30
macos-sierra-test-login-interactive      /nix/store/8jwl96k4va9bvcl8ds2rgjpq2073gbij-bash-interactive-4.4-p23
macos-sierra-test-login-interactive      /nix/store/9a762m9ld7f6z0x5d47lvnnw2nd0f2xw-gettext-0.19.8.1
macos-sierra-test-login-interactive      /nix/store/agvf6aqhvqszyjn4adb47rx008c1039k-ed-1.14.2
macos-sierra-test-login-interactive      /nix/store/bc6vywbmvvwpk1bfk0dgpw3i192phlp3-libc++abi-5.0.2
macos-sierra-test-login-interactive      /nix/store/c8zq9hdriqbm6cxlcdwkpqc3ivdbifz4-readline-7.0p5
macos-sierra-test-login-interactive      /nix/store/cwgp49bjfc9hjmg63kcj3i2qyiqq1syl-ncurses-6.1
macos-sierra-test-login-interactive      /nix/store/cwx4dshnbrjigh3g6zp1ln4wwdnm8agh-binutils-2.30
macos-sierra-test-login-interactive      /nix/store/d3w7zyl2wdbl4ajilypfmn454d29c4pn-gzip-1.9
macos-sierra-test-login-interactive      /nix/store/f0ymknfjldn3lsmxcm3wcrla2dp6bqiq-libc++-5.0.2
macos-sierra-test-login-interactive      /nix/store/fjilysyz08s9vl1bdcf3vndndd4xfacj-bash-interactive-4.4-p23-dev
macos-sierra-test-login-interactive      /nix/store/fsdil6i3g3lfpgmdvb22gbf9fm3pjr35-cctools-binutils-darwin-wrapper
macos-sierra-test-login-interactive      /nix/store/g309ikgbr76zzn4809swx0j89qqlqygz-nix-info
macos-sierra-test-login-interactive      /nix/store/gvxxgcbrxrvhl55cy2wf8m89hfrg8gqw-findutils-4.6.0
macos-sierra-test-login-interactive      /nix/store/hyrxf63yjfcay6q1wp3dfc5y4xvshlal-expand-response-params
macos-sierra-test-login-interactive      /nix/store/i18ihnf3rxkj1xdch5qalbqbkl8hb6my-bootstrap-stage2-binutils-wrapper
macos-sierra-test-login-interactive      /nix/store/ilj27ynsxq0b965qr1m976mz8h2sy1g6-patch-2.7.6
macos-sierra-test-login-interactive      /nix/store/jsylgldy52pv6rs2y4l04qszbwxjfh8y-libiconv-osx-10.11.6
macos-sierra-test-login-interactive      /nix/store/kdnhvzavikc62vf5c5hyz2233x4pa136-gnused-4.5
macos-sierra-test-login-interactive      /nix/store/kh9sj73nfqfkb1kn6fvvbqnwm5prg698-xz-5.2.4-bin
macos-sierra-test-login-interactive      /nix/store/kv402lpbn0xrb0pm7v9kpxjvgndy3fxv-ICU-osx-10.10.5
macos-sierra-test-login-interactive      /nix/store/ky17cjlbna5xlpwfsfmj2cvflmwhy4na-expand-response-params
macos-sierra-test-login-interactive      /nix/store/l7d4nmsp8dkxqc1vz01vnfbm60mqnb7k-libc++-5.0.2
macos-sierra-test-login-interactive      /nix/store/la4az1fd63wq795jl6siyml0044pxry6-bash-interactive-4.4-p23-doc
macos-sierra-test-login-interactive      /nix/store/n7bh0pnddnckh9zs14wfz7snl7gkggv4-bash-4.4-p23-info
macos-sierra-test-login-interactive      /nix/store/nib1qjrhkz4bsfp11kjqlqf93544mi11-bash-4.4-p23-doc
macos-sierra-test-login-interactive      /nix/store/nvb1kr6nsd1q1s0qjj6ld1n8rpg5lc1w-libc++abi-5.0.2
macos-sierra-test-login-interactive      /nix/store/p0cdc7rzf1a69k013vnf4av7a6xcsngp-llvm-5.0.2-lib
macos-sierra-test-login-interactive      /nix/store/psry9nab69pwi27izxgy41zh7pccniqx-zlib-1.2.11
macos-sierra-test-login-interactive      /nix/store/pss843nbpn833hjsb6yxsyrrazn0spkd-gawk-4.2.1
macos-sierra-test-login-interactive      /nix/store/qmfzx3979byqsqg9dlg9mj058ac3axjp-bash-4.4-p23-man
macos-sierra-test-login-interactive      /nix/store/qmxyi0v65y3k8xf8wjcdx4gsk39gijfi-bash-interactive-4.4-p23-man
macos-sierra-test-login-interactive      /nix/store/qxpvlfwz9qjlf5v9vb636ihlfrfq2lxx-gmp-6.1.2
macos-sierra-test-login-interactive      /nix/store/r765bx4lndy8ymwlq0b098cbgycpska4-DarwinTools-1
macos-sierra-test-login-interactive      /nix/store/r7v5bfdxgimakcxj26xij8vr0n4yh03b-stdenv-darwin
macos-sierra-test-login-interactive      /nix/store/rm5hs2mg6rw6p1j2fsaiyx4jnspr3qxs-coreutils-8.29
macos-sierra-test-login-interactive      /nix/store/rq25z24vqncw9m9kljag531lsgi4lcws-diffutils-3.6
macos-sierra-test-login-interactive      /nix/store/vqy0pk0ckzynzjrymccyfpfcjmfnaw1r-bash-4.4-p23-dev
macos-sierra-test-login-interactive      /nix/store/vsgzq5h8fsywjw95h64azqpw4q9cswc9-CF-osx-10.10.5
macos-sierra-test-login-interactive      /nix/store/ylmiw5xyc9j87i6bdfcj06ay4z3apz3k-gnumake-4.2.1
macos-sierra-test-login-interactive      /nix/store/z0x9h91vvbavfgn48ybaz0vi9sczxn2i-pcre-8.42
macos-sierra-test-login-interactive      /nix/store/z4k8fk58pw5lpm1bib1ijk1mpji0v033-xz-5.2.4
macos-sierra-test-login-interactive      /nix/store/zbhk0jhc9y8hmbcax9nvddbik3rgsary-bash-4.4-p23
macos-sierra-test-login-interactive    copying path '/nix/store/nib1qjrhkz4bsfp11kjqlqf93544mi11-bash-4.4-p23-doc' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/n7bh0pnddnckh9zs14wfz7snl7gkggv4-bash-4.4-p23-info' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/qmfzx3979byqsqg9dlg9mj058ac3axjp-bash-4.4-p23-man' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/la4az1fd63wq795jl6siyml0044pxry6-bash-interactive-4.4-p23-doc' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/1vrn0x735avl7sq6mwf5h50slb4666j7-bash-interactive-4.4-p23-info' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/qmxyi0v65y3k8xf8wjcdx4gsk39gijfi-bash-interactive-4.4-p23-man' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/59rrgildqwf88nwrkf0xp3g1c46akf8k-Libsystem-osx-10.11.6' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/39mw7i8qjmvr94pqlx62znmkxw1ga17p-adv_cmds-osx-10.5.8-locale' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/2ws9cmamvr7xyvdg4d2nnd1bmr1zjrrq-bootstrap-tools' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/zbhk0jhc9y8hmbcax9nvddbik3rgsary-bash-4.4-p23' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/14k27li9psmi201brzm3yhilm7nq0cfc-bzip2-1.0.6.0.1' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/hyrxf63yjfcay6q1wp3dfc5y4xvshlal-expand-response-params' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/pss843nbpn833hjsb6yxsyrrazn0spkd-gawk-4.2.1' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/ylmiw5xyc9j87i6bdfcj06ay4z3apz3k-gnumake-4.2.1' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/kdnhvzavikc62vf5c5hyz2233x4pa136-gnused-4.5' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/bc6vywbmvvwpk1bfk0dgpw3i192phlp3-libc++abi-5.0.2' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/3whkmrfls5pwdi5yxz8qfp7clsl17j7l-libffi-3.2.1' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/jsylgldy52pv6rs2y4l04qszbwxjfh8y-libiconv-osx-10.11.6' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/cwgp49bjfc9hjmg63kcj3i2qyiqq1syl-ncurses-6.1' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/z0x9h91vvbavfgn48ybaz0vi9sczxn2i-pcre-8.42' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/z4k8fk58pw5lpm1bib1ijk1mpji0v033-xz-5.2.4' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/psry9nab69pwi27izxgy41zh7pccniqx-zlib-1.2.11' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/cwx4dshnbrjigh3g6zp1ln4wwdnm8agh-binutils-2.30' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/f0ymknfjldn3lsmxcm3wcrla2dp6bqiq-libc++-5.0.2' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/7hcnb7lk6q05zyq5g2x0yac89nk46yv8-bzip2-1.0.6.0.1-bin' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/agvf6aqhvqszyjn4adb47rx008c1039k-ed-1.14.2' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/d3w7zyl2wdbl4ajilypfmn454d29c4pn-gzip-1.9' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/kh9sj73nfqfkb1kn6fvvbqnwm5prg698-xz-5.2.4-bin' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/365x532d88lj3zyi84q1wmh00nlnr749-gnugrep-3.1' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/ilj27ynsxq0b965qr1m976mz8h2sy1g6-patch-2.7.6' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/kv402lpbn0xrb0pm7v9kpxjvgndy3fxv-ICU-osx-10.10.5' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/2kd8k0h7mkrwc444r9la48liyl2di3mx-cctools-port-895' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/04bnzqnqivgxrhly898ys6jhvb7r77z8-compiler-rt-5.0.2' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/9a762m9ld7f6z0x5d47lvnnw2nd0f2xw-gettext-0.19.8.1' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/qxpvlfwz9qjlf5v9vb636ihlfrfq2lxx-gmp-6.1.2' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/rm5hs2mg6rw6p1j2fsaiyx4jnspr3qxs-coreutils-8.29' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/6jmyb8qzjr77pnpflz3k95zyfhxd6x11-compiler-rt-5.0.2-dev' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/2571v4g663w2490rzm1qi4qrzj1qijw5-clang-5.0.2-lib' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/p0cdc7rzf1a69k013vnf4av7a6xcsngp-llvm-5.0.2-lib' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/vsgzq5h8fsywjw95h64azqpw4q9cswc9-CF-osx-10.10.5' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/rq25z24vqncw9m9kljag531lsgi4lcws-diffutils-3.6' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/gvxxgcbrxrvhl55cy2wf8m89hfrg8gqw-findutils-4.6.0' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/r765bx4lndy8ymwlq0b098cbgycpska4-DarwinTools-1' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/c8zq9hdriqbm6cxlcdwkpqc3ivdbifz4-readline-7.0p5' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/7vsmbgsp21kl7mvyp305ac13qzsh5bmk-gnutar-1.30' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/g309ikgbr76zzn4809swx0j89qqlqygz-nix-info' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/5im29qx9rni3w8l3j8i2yr22sin55kxv-cctools-binutils-darwin' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/fsdil6i3g3lfpgmdvb22gbf9fm3pjr35-cctools-binutils-darwin-wrapper' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/19xwrnwwdhx278wd2hzf0f4fhd619fqv-clang-5.0.2' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/ky17cjlbna5xlpwfsfmj2cvflmwhy4na-expand-response-params' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/nvb1kr6nsd1q1s0qjj6ld1n8rpg5lc1w-libc++abi-5.0.2' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/i18ihnf3rxkj1xdch5qalbqbkl8hb6my-bootstrap-stage2-binutils-wrapper' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/l7d4nmsp8dkxqc1vz01vnfbm60mqnb7k-libc++-5.0.2' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/0h6cl7wfja45d46gid9fyrpwf1xy2jns-bootstrap-stage2-clang-wrapper' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/vqy0pk0ckzynzjrymccyfpfcjmfnaw1r-bash-4.4-p23-dev' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/7qw2hb02ychpaabvxs2yq16p1cc0i1jc-clang-wrapper-5.0.2' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/8jwl96k4va9bvcl8ds2rgjpq2073gbij-bash-interactive-4.4-p23' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/r7v5bfdxgimakcxj26xij8vr0n4yh03b-stdenv-darwin' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    copying path '/nix/store/fjilysyz08s9vl1bdcf3vndndd4xfacj-bash-interactive-4.4-p23-dev' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive    Starting: testexitok
macos-sierra-test-login-interactive         ./testscript::runtest::43 testexitok
macos-sierra-test-login-interactive         ./testscript::testexitok::8 /bin/bash -c 'exit 0'
macos-sierra-test-login-interactive    Finishing: testexitok, duration:0 result:0
macos-sierra-test-login-interactive    Starting: testexitfail
macos-sierra-test-login-interactive         ./testscript::runtest::43 testexitfail
macos-sierra-test-login-interactive         ./testscript::testexitfail::12 /bin/bash -c 'exit 1'
macos-sierra-test-login-interactive    Finishing: testexitfail, duration:0 result:1
macos-sierra-test-login-interactive    Starting: testshell
macos-sierra-test-login-interactive         ./testscript::runtest::43 testshell
macos-sierra-test-login-interactive         ./testscript::testshell::16 nix-shell -p hello --run hello
macos-sierra-test-login-interactive        these paths will be fetched (0.02 MiB download, 0.07 MiB unpacked):
macos-sierra-test-login-interactive          /nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10
macos-sierra-test-login-interactive        copying path '/nix/store/a36fmxl0cf2d1cp7jddrcihypfxipfd0-hello-2.10' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive        Hello, world!
macos-sierra-test-login-interactive    Finishing: testshell, duration:4 result:0
macos-sierra-test-login-interactive    Starting: testnixenv
macos-sierra-test-login-interactive         ./testscript::runtest::43 testnixenv
macos-sierra-test-login-interactive         ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
macos-sierra-test-login-interactive        installing 'hello-2.10'
macos-sierra-test-login-interactive        building '/nix/store/l0hp7hmcppm59dw0klxnvyybgdi2xl50-user-environment.drv'...
macos-sierra-test-login-interactive        created 2 symlinks in user environment
macos-sierra-test-login-interactive         ./testscript::testnixenv::21 hello
macos-sierra-test-login-interactive        Hello, world!
macos-sierra-test-login-interactive         ./testscript::testnixenv::22 nix-env --uninstall 'hello.*'
macos-sierra-test-login-interactive        uninstalling 'hello-2.10'
macos-sierra-test-login-interactive        building '/nix/store/xsk9wjy0dpp7w7d3r3bkzxzaklqdzq6q-user-environment.drv'...
macos-sierra-test-login-interactive        created 0 symlinks in user environment
macos-sierra-test-login-interactive    Finishing: testnixenv, duration:1 result:0
macos-sierra-test-login-interactive    Starting: testnixchannel
macos-sierra-test-login-interactive         ./testscript::runtest::43 testnixchannel
macos-sierra-test-login-interactive         ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
macos-sierra-test-login-interactive         ./testscript::testnixchannel::27 nix-channel --update
macos-sierra-test-login-interactive        unpacking channels...
macos-sierra-test-login-interactive        created 2 symlinks in user environment
macos-sierra-test-login-interactive         ./testscript::testnixchannel::28 nix-env -iA nixos-18-03.hello
macos-sierra-test-login-interactive        installing 'hello-2.10'
macos-sierra-test-login-interactive        these paths will be fetched (8.97 MiB download, 47.60 MiB unpacked):
macos-sierra-test-login-interactive          /nix/store/cr3s0wfg4b0vpqf4avxbs2cjyh8ik8x5-hello-2.10
macos-sierra-test-login-interactive          /nix/store/gagv3nkbppdjb78csszx77agzdzlpg46-libc++-5.0.2
macos-sierra-test-login-interactive          /nix/store/madyr371ywi25cyd0ac6l4jgbpfks0l2-ICU-osx-10.10.5
macos-sierra-test-login-interactive          /nix/store/n424yw4ws0hmaps1gh26g4hdibfimc8k-libc++abi-5.0.2
macos-sierra-test-login-interactive          /nix/store/yvkvyvc36l2dmwl22vajc8bdg7fv3p6b-Libsystem-osx-10.11.6
macos-sierra-test-login-interactive          /nix/store/z9lvlxdmlbwg00j2drhwm8b6f8j4xqx5-CF-osx-10.10.5
macos-sierra-test-login-interactive        copying path '/nix/store/yvkvyvc36l2dmwl22vajc8bdg7fv3p6b-Libsystem-osx-10.11.6' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive        copying path '/nix/store/n424yw4ws0hmaps1gh26g4hdibfimc8k-libc++abi-5.0.2' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive        copying path '/nix/store/gagv3nkbppdjb78csszx77agzdzlpg46-libc++-5.0.2' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive        copying path '/nix/store/madyr371ywi25cyd0ac6l4jgbpfks0l2-ICU-osx-10.10.5' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive        copying path '/nix/store/z9lvlxdmlbwg00j2drhwm8b6f8j4xqx5-CF-osx-10.10.5' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive        copying path '/nix/store/cr3s0wfg4b0vpqf4avxbs2cjyh8ik8x5-hello-2.10' from 'https://cache.nixos.org'...
macos-sierra-test-login-interactive        building '/nix/store/796cy480iaqz51d3bmwsdw478zg4rfg9-user-environment.drv'...
macos-sierra-test-login-interactive        created 2 symlinks in user environment
macos-sierra-test-login-interactive         ./testscript::testnixchannel::29 hello
macos-sierra-test-login-interactive        Hello, world!
macos-sierra-test-login-interactive         ./testscript::testnixchannel::30 nix-env --uninstall 'hello.*'
macos-sierra-test-login-interactive        uninstalling 'hello-2.10'
macos-sierra-test-login-interactive    Finishing: testnixchannel, duration:27 result:0
macos-sierra-test-interactive    ./testscript: line 60: nix-shell: command not found
macos-sierra-test-interactive    Starting: testexitok
macos-sierra-test-interactive         ./testscript::runtest::43 testexitok
macos-sierra-test-interactive         ./testscript::testexitok::8 /bin/bash -c 'exit 0'
macos-sierra-test-interactive    Finishing: testexitok, duration:0 result:0
macos-sierra-test-interactive    Starting: testexitfail
macos-sierra-test-interactive         ./testscript::runtest::43 testexitfail
macos-sierra-test-interactive         ./testscript::testexitfail::12 /bin/bash -c 'exit 1'
macos-sierra-test-interactive    Finishing: testexitfail, duration:0 result:1
macos-sierra-test-interactive    Starting: testshell
macos-sierra-test-interactive         ./testscript::runtest::43 testshell
macos-sierra-test-interactive         ./testscript::testshell::16 nix-shell -p hello --run hello
macos-sierra-test-interactive        ./testscript: line 16: nix-shell: command not found
macos-sierra-test-interactive    Finishing: testshell, duration:0 result:127
macos-sierra-test-interactive    Starting: testnixenv
macos-sierra-test-interactive         ./testscript::runtest::43 testnixenv
macos-sierra-test-interactive         ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
macos-sierra-test-interactive        ./testscript: line 20: nix-env: command not found
macos-sierra-test-interactive    Finishing: testnixenv, duration:0 result:127
macos-sierra-test-interactive    Starting: testnixchannel
macos-sierra-test-interactive         ./testscript::runtest::43 testnixchannel
macos-sierra-test-interactive         ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
macos-sierra-test-interactive        ./testscript: line 26: nix-channel: command not found
macos-sierra-test-interactive    Finishing: testnixchannel, duration:0 result:127
macos-sierra-test-ssh    ./testscript: line 60: nix-shell: command not found
macos-sierra-test-ssh    Starting: testexitok
macos-sierra-test-ssh         ./testscript::runtest::43 testexitok
macos-sierra-test-ssh         ./testscript::testexitok::8 /bin/bash -c 'exit 0'
macos-sierra-test-ssh    Finishing: testexitok, duration:0 result:0
macos-sierra-test-ssh    Starting: testexitfail
macos-sierra-test-ssh         ./testscript::runtest::43 testexitfail
macos-sierra-test-ssh         ./testscript::testexitfail::12 /bin/bash -c 'exit 1'
macos-sierra-test-ssh    Finishing: testexitfail, duration:0 result:1
macos-sierra-test-ssh    Starting: testshell
macos-sierra-test-ssh         ./testscript::runtest::43 testshell
macos-sierra-test-ssh         ./testscript::testshell::16 nix-shell -p hello --run hello
macos-sierra-test-ssh        ./testscript: line 16: nix-shell: command not found
macos-sierra-test-ssh    Finishing: testshell, duration:0 result:127
macos-sierra-test-ssh    Starting: testnixenv
macos-sierra-test-ssh         ./testscript::runtest::43 testnixenv
macos-sierra-test-ssh         ./testscript::testnixenv::20 nix-env -iA nixpkgs.hello
macos-sierra-test-ssh        ./testscript: line 20: nix-env: command not found
macos-sierra-test-ssh    Finishing: testnixenv, duration:0 result:127
macos-sierra-test-ssh    Starting: testnixchannel
macos-sierra-test-ssh         ./testscript::runtest::43 testnixchannel
macos-sierra-test-ssh         ./testscript::testnixchannel::26 nix-channel --add https://nixos.org/channels/nixos-18.03 nixos-18-03
macos-sierra-test-ssh        ./testscript: line 26: nix-channel: command not found
macos-sierra-test-ssh    Finishing: testnixchannel, duration:0 result:127
</pre>
<h2 id="detail-install-default-macos-sierra-Vagrantfile">install-default-macos-sierra-Vagrantfile</h1><pre>Vagrant.configure("2") do |config|
  config.vm.box = "jhcook/macos-sierra"
  config.vm.provision "shell", inline: <<-SHELL

  SHELL
  config.vm.provision "shell", privileged: false, inline: <<-SHELL

echo 'No preInstallUnprivileged rules.'
  SHELL
  config.vm.synced_folder ".", "/vagrant", disabled: true
  config.vm.provider "virtualbox" do |vb|
    vb.memory = "2048"

    # for macos:
    vb.customize ["modifyvm", :id, "--usb", "off"]
    vb.customize ["modifyvm", :id, "--usbehci", "off"]
  end
end
</pre>
